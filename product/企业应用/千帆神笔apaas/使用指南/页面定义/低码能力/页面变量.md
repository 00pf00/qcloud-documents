

## **页面变量使用指引**

### **页面变量分类和含义**

- 入参变量：表示当其他页面唤起当前页面时需要传入的参数，默认支持URL携带非对象类型的入参变量。
- 页面变量：仅在当前页面中可以使用的变量，可定义不同类型的页面变量。
- 全局变量：分为系统变量和非系统变量，系统变量可包含：当前用户、当前用户部门、当前用户角色、系统时间、时区等；非系统变量为某一个页面产生的数据，可以在多个页面间使用，（应用访问结束可视为销毁）

当前可以支持的变量类型：对象类型、关联类型、文本类型、枚举类型、实数类型、日期类型、整数类型、图片类型、文件类型共计9类。

### **页面变量如何定义？**

**入口：**选中任何一个页面->左侧工具栏中选择                 ![img](https://docimg10.docs.qq.com/image/fKZlpXGD9Ao1TiKhb1UnGA.png?w=44&h=44)        图标->选则要全局变量、入参变量或者页面变量分类->点击                 ![img](https://docimg2.docs.qq.com/image/d3hxEUq9wMnl5g-Uao8U6w.png?w=32&h=36)        即可打开新建变量的弹窗。

可支持对变量进行新增、修改和删除。

支持设置变量的标识（需以字母开头，支持字母和数字，一旦确定，后续不可修改）、设置变量类型以及默认值。

​                 ![img](https://docimg3.docs.qq.com/image/BL0vlQPwJS5KxhzJKroGwA.png?w=1280&h=762.0964360587002)        

### **页面变量如何更新？**

 通过动作编辑器中的变量赋值动作，可以对选中的变量进行赋值操作，新的变量值可以通过表达式计算获得，如下图所示：

​                 ![img](https://docimg9.docs.qq.com/image/WGpeRETL_jUSRpHNTYbIBQ.png?w=1280&h=882.4242424242424)        

### **页面变量如何使用？**

#### **场景1: 作为表单数据源**

可选择变量作为表单数据源，该变量类型必须为对象类型或关联关系类型。用以支持从其他页面传入对象数据，或从当前页面动态获取的对象数据在表单中展示的场景。

​                 ![img](https://docimg6.docs.qq.com/image/GOlYf1oTsvn-nJSG6JzLuA.png?w=1280&h=851.5481171548117)        

#### **场景2: 可在表达式中作为参数使用**

在页面定义的参数可以直接在表达式中作为表达式参数被直接引用。引用时，可直接在表达式编辑器中通过编码引入，或直接在右侧参数列表中点击参数，即可自动插入光标所在位置。引用语法如下：

全局变量引用：  $global.Test

入参变量引用： $params.Test

页面变量引用： $page.Test

*PS：“Test”为变量名称。*

​                 ![img](https://docimg3.docs.qq.com/image/PYYP-DpQYY40owf47ZaoNA.png?w=1280&h=788)        

#### **场景3: 作为列表、表格、树行组件数据源的筛选条件使用**

在列表、表格和树形组件的数据源设置中，数据源的筛选逻辑配置中，可以直接使用变量作为筛选条件，并配置筛选逻辑，如下图所示：

​                 ![img](https://docimg1.docs.qq.com/image/Qh3CyUlUn6NvW6k9LV3eqQ.png?w=1280&h=752.8362369337979)        

#### **场景4: 将A页面的数据通过页面入参传递给页面B**

在动作编辑器中，“打开页面”动作支持将当前页面的变量（包括全局变量、入参变量以及页面变量）作为参数传递给被打开的页面，从而实现页面间数据传递。

​                 ![img](https://docimg4.docs.qq.com/image/Qap73ld3spCQYJrTKC-0yw.png?w=1280&h=877.0670037926676)        



#### **场景5:将页面中的变量支持传递给流程**

在动作编辑器中，“唤起流程”动作支持将当前页面的变量（包括全局变量、入参变量以及页面变量）作为参数传递给被唤起的流程，从而实现页面到流程的数据传递。

​                 ![img](https://docimg10.docs.qq.com/image/vDZIhu18t9cjJcUBCFCP0w.png?w=1280&h=884.8979591836734)        



#  