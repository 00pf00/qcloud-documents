
备份的重要性不言而喻，数据库备份可用于应付数据丢失或损坏以及数据误操作等，您可以设置备份策略自动备份云MySQL数据库，或者手动备份云MySQL数据库。

## 备份说明
目前，云数据库 MySQL 高可用版支持2种自动备份方式：

物理备份，物理数据全拷贝。 (自动备份与手动备份均支持)
逻辑备份，SQL 语句的备份。(手动备份支持)

>?
>- 物理备份恢复方式需要用 xbstream 解包，请参见 使用物理备份恢复数据库。
>- 自动备份设置功能可设置备份保留时长和备份开始发起时间。详情请参见 “自动备份设置”。

>!云数据库 MySQL 的自动备份于2019年02月26日起，陆续仅支持物理备份的方式。存量自动备份为逻辑备份的实例会陆续被自动切换到物理备份，此次切换不会影响您业务访问，可能会影响您自动备份的使用习惯，若您需要逻辑备份，可以使用 云数据库 MySQL 控制台 中手动备份功能或者通过 API 调用 来生成逻辑备份。具体如下：
1. 自动备份设置默认方式为物理备份，不再提供物理备份和逻辑备份的选择。
2. 此次备份优化后，不论是逻辑备份还是物理备份功能都会被压缩，故部分下载功能无法使用，转而可通过手动逻辑备份中备份部分库表功能代替，详情请参见”手动备份”。
3. 存量自动备份是逻辑备份的实例，会自动被改造成物理备份。
4. 实例备份文件占用备份空间，云MySQL目前的备份空间全部免费赠送使用，后续对备份空间收费会另行通知，敬请关注。请合理设计备份周期、合理使用备份空间，避免后续收费后造成额外的费用。
5. 尽量选择业务低峰期进行备份
6. 备份文件有保留时间，请及时下载需要保留的备份文件到本地。
7. 备份期间请禁止DDL操作，避免锁表导致备份失败。
以下是物理备份与逻辑备份对比：
物理备份的优势
•	备份速度快。
•	支持流式备份和压缩。
•	备份成功率高。
•	恢复简单并且快速。
•	依赖备份进行的耦合操作，如：增加RO、增加灾备会变得更加快速
逻辑备份的劣势
•	恢复时需要执行 sql 和构建索引，恢复时间长。
•	备份速率慢，数据量大的情况下尤为明显。
•	备份过程中会对实例造成压力，可能会加大主从延迟。
•	有可能会丢失浮点数的精度信息。
•	由于各种问题（错误视图等），可能导致备份失败。
•	依赖备份进行的耦合操作，如：增加RO、增加灾备会变得缓慢

| 数据库类型 | 数据备份 | 日志备份 |
|---------|---------|---------|
| MySQL | MySQL 5.5/5.6/5.7（高可用版）：<li>自动备份支持全量物理备份。<li>手动备份支持全量物理备份、全量逻辑备份和单库单表逻辑备份。<li>自动备份与手动备份均支持压缩和下载。<li>自动备份不可主动删除，可设置保留时长。<li>手动备份可主动删除，没有删除的前提下一直保留。 | <li>Binlog 文件会占用实例的磁盘容量。<li>Binlog 支持下载，但不支持压缩。<li>可设置 Binlog 保留时长。<li>Binlog 目前不可主动删除。 |


## 设置备份策略实现自动备份
1. 在实例列表页，单击实例名称，进入管理页，选择【备份恢复】>【自动备份设置】，单击【编辑设置】即可设置备份方式。
2. 在自动备份设置页面设置备份参数，单击【确定】。参数说明如下：

| 参数 |                                   说明                           |
| ---------- | ----------------------------------------------------- |
| 备份发起时间             | 可以自定义设置为以4个小时为单位的时间区间，建议设置为业务低峰期时间。   默认时间为系统自动分配的备份发起时间。      **说明** :备份发起时间只是备份开始启动的时间，并不代表备份结束的时间，   比如选择:02:00-06:00点，系统会在02:00-06:00时间范围内的某一个时间点发起备份，   具体的发起时间点取决于后端备份策略和备份系统状况。 |
| 数据备份保留             | 备份文件可以保留7~732天(目前备份空间免费)，默认为7天。   **说明** : 备份空间收费将另行通知 |
| 日志备份保留             | 日志备份文件保留的天数，默认为 7 天。   可以设置为 7~732天(目前备份空间免费)，且必须小于等于数据备份天数。   **说明** : 备份空间收费将另行通知 |



表 1. 备份设置参数说明
参数	说明
备份发起时间	可以自定义设置为以4个小时为单位的时间区间，建议设置为业务低峰期时间。
默认时间为系统自动分配的备份发起时间。

说明 :备份发起时间只是备份开始启动的时间，并不代表备份结束的时间，
比如选择:02:00-06:00点，系统会在02:00-06:00时间范围内的某一个时间点发起备份，
具体的发起时间点取决于后端备份策略和备份系统状况。
数据备份保留	备份文件可以保留7~732天(目前备份空间免费)，默认为7天。
说明 : 备份空间收费将另行通知
日志备份保留	日志备份文件保留的天数，默认为 7 天。
可以设置为 7~732天(目前备份空间免费)，且必须小于等于数据备份天数。
说明 : 备份空间收费将另行通知



 


手动备份MySQL数据

【手动备份】功能允许用户自助发起备份任务，目前免费，后续备份空间收费将另行通知。


1、在实例列表页，单击实例名称，进入管理页，选择【备份恢复】>【手动备份】

 
 

2、设置好备份方式、备份策略，单击确定。
说明：手动备份支持全量物理备份、全量逻辑备份和单库单表逻辑备份。

 

说明: 如果是 逻辑备份 > 单库备份或单表备份，请在左侧选择要备份的数据库或数据表，单击 >将要备份的数据库或表加入列表。若您还没有数据库，请先创建数据库或表。

常见问题
1、为什么无法进行分库表的逻辑备份和下载？
答: 此次备份新版升级过程中，不论是逻辑备份还是物理备份功能都采用了新的压缩算法，故部分下载功能暂时无法使用。现在备份新版升级已全部完成，您可以通过手动备份里的逻辑备份->指定库表功能完成分库表的逻辑备份，同时也可以下载已完成的该次备份。


2、TencentDB for MySQL的数据备份是否可以关闭？
答：不可以关闭。数据备份保留天数最少7天，最多732天。后续备份收费后会开通减少备份频率的设置，可以通过减少备份频率来降低备份空间的占用量。

说明：目前备份空间全部免费使用，后续收费会另行通知。请合理设计备份周期、合理使用备份空间，避免后续收费后造成额外的费用。



3、TencentDB for MySQL的日志备份是否可以关闭？
答：不可以关闭。数据备份保留天数最少7天，最多732天。且必须小于等于数据备份天数。

说明：目前备份空间全部免费使用，后续收费会另行通知。请合理设计备份周期、合理使用备份空间，避免后续收费后造成额外的费用。




