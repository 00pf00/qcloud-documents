
云数据库 MySQL 实例在执行大事务或大量 DML 时会产生较多的 binlog，binlog 是 MySQL 同步数据的基础，用以保障数据库的可恢复性、稳定性、高可用能力。

因 binlog 的写入速度会影响数据库运行时的性能。为提升云数据库 MySQL 的性能以及稳定性，云数据库 MySQL 将对 binlog 存储进行升级，本次升级会将 binlog 的存储介质迁至高性能 SSD 盘，升级后 binlog 会占用您的 [存储空间](https://cloud.tencent.com/document/product/236/18335#.E8.AE.A1.E8.B4.B9.E5.85.AC.E5.BC.8F)（即您购买的硬盘大小）。

本次升级仅涉及双节点和三节点架构的云数据库 MySQL，开始进行 binlog 迁移至高性能 SSD 盘后，binlog 的使用空间会计算入 [磁盘总使用空间](https://cloud.tencent.com/document/product/236/8455#.E7.9B.91.E6.8E.A7.E6.8C.87.E6.A0.87)，有可能会触发告警，请尽快对存储空间进行扩容，建议剩余空间大于20%。

>?
>- 云数据库 MySQL 默认会保留5天的 binlog 在本地，即 binlog 会先暂存于磁盘空间，超出保留期后会自动删除，请参见  [设置本地 Binlog 保留](https://cloud.tencent.com/document/product/236/53513)。
>- binlog 生成的同时亦会通过自动备份功能上传至 COS 备份，自动备份功能请参见 [备份数据库](https://cloud.tencent.com/document/product/236/35172)。

## 升级时间
- 2021年04月01日0时起，港澳台地区（中国香港）和其他境外地域的双节点、三节点云数据库 MySQL，开始将 binlog 使用空间计入磁盘总使用空间。
- 2021年04月07日0时起，西南地区（成都、重庆）、华南地区（深圳金融）、华东地区（上海金融）、华北地区（北京金融）的双节点、三节点云数据库 MySQL，开始将 binlog 使用空间计入磁盘总使用空间。
- 2021年04月14日0时起，华北地区（北京）地域的双节点、三节点云数据库 MySQL，开始将 binlog 使用空间计入磁盘总使用空间。
- 2021年04月19日0时起，华东地区（上海）地域的双节点、三节点云数据库 MySQL，开始将 binlog 使用空间计入磁盘总使用空间。
- 2021年04月21日0时起，华南地区（广州）地域的双节点、三节点云数据库 MySQL，开始将 binlog 使用空间计入磁盘总使用空间。
- 2021年04月22日0时之后新增地域的双节点、三节点云数据库 MySQL，亦会将 binlog 使用空间计入磁盘总使用空间。

## 减少本地 binlog 占用空间建议
本地 binlog 支持设置保留周期，详情请查看 [设置本地 Binlog 保留](https://cloud.tencent.com/document/product/236/53513)。

## 热点问题
#### 升级过程中是否会影响扩缩容？
不影响，扩缩容在发布阶段依然使用数据文件使用空间进行限制。

#### 升级后，其他功能会受到影响吗？
目前仅会影响告警触发，原使用数据文件使用空间/磁盘空间计算，现变更为磁盘总使用空间/磁盘空间计算。

#### 什么时候会正式将磁盘总使用空间作为扩缩容限制？
现网实例的 binlog 迁移至 SSD 时，正式使用磁盘总使用空间作为扩缩容时的限制，请以通知为准。
