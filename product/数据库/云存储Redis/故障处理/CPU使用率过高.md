
## 现象描述
- 现象1：CPU 使用率的监控指标高。
- 现象2：整体吞吐量变小、响应速度变慢。

## 可能原因
- 存在高时间复杂度的命令。
- 正在进行 AOF（Append Only File）备份。
- 存在对热点 Key 的大量访问。
- 存在频繁建立连接的现象。
- 存在异常访问。

## 解决思路
1. [业务优化](#ywyh)
 1. 在控制台系统监控页面确认 QPS（Queries Per Second）是否过高或者有突发的热 Key。
 2. 在排查异常访问后，对业务逻辑进行优化，例如，优化高复杂度的命令、优化热点 Key、优化短连接、关闭 AOF。如果仍不能解决问题，您可以考虑升级实例。

2. [实例升级](#slsj)
 - 如果是读负载过大，您可以通过增加副本数分摊读负载，开启读写分离可能会导致数据读取不一致（副本节点数据延后于主节点），请先确认业务是否允许数据不一致的问题。
 - 如果是写负载过大，您可以通过升级为集群版提升 CPU 处理能力，升级集群前需要检测兼容性，请参见 [标准架构迁移集群架构检查](https://cloud.tencent.com/document/product/239/43697)。

## 处理步骤
### [业务优化](id:ywyh)
1. 登录 [Redis 控制台](https://console.cloud.tencent.com/redis)，在实例列表，单击实例 ID，进入实例管理页面。
2. 在实例管理页面，选择【系统监控】页，确认 QPS 是否过高或者有突发的热 Key。
3. 在排查异常访问后，您可以对业务逻辑进行优化，例如，优化高复杂度的命令、优化热点 Key、优化短连接、关闭 AOF。如果仍不能解决问题，您可以考虑升级实例。

### [实例升级](id:slsj)
#### 扩容实例
登录 [Redis 控制台](https://console.cloud.tencent.com/redis)，在实例列表，选择“操作”列的【配置变更】>【增加分片】或【增加副本】。
>?
>- 根据您的业务情况选择增加分片或增加副本。
>- 标准架构需升级为集群架构后方可增加分片，升级请参见 [升级实例架构](https://cloud.tencent.com/document/product/239/46458)。
>- 每分片能提供的 QPS 为8W - 10W，请按需增加。
>
![](https://main.qcloudimg.com/raw/6b11d48de231a95c1d20e9c2e5247cbc.png)

#### 升级架构
通过升级为集群版提升 CPU 处理能力，升级集群前需要检测兼容性，请参见 [标准架构迁移集群架构检查](https://cloud.tencent.com/document/product/239/43697)。
1. 登录 [Redis 控制台](https://console.cloud.tencent.com/redis)，在实例列表，单击实例 ID，进入实例详情页面。
2. 在实例详情页的“规格信息处”，单击【架构升级】。
![](https://main.qcloudimg.com/raw/75b2e8010b3420f9c31244bb3fa26ee6.png)
