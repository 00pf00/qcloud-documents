## 操作场景
本文档将指导您购买并申请代码数字签名证书成功后，使用 腾讯云提供的 [数字签名工具](https://www.trustasia.com/signtools/setup.exe) 为您的应用进行签名。

## 前提条件
已拥有代码数字签名证书。

## 操作指南
### 步骤1：导入证书
1. [单击此处](https://www.trustasia.com/signtools/setup.exe) 下载并安装数字签名工具。
2. 打开并安装数字签名证书。如下图所示：
![](https://main.qcloudimg.com/raw/a944ad3d919cfb28dcd368948dc38748.png)
3. 单击【证书管理】>【导入】。导入您申请成功的证书。如下图所示：
![](https://main.qcloudimg.com/raw/2fa2f8ba2be59a821e0cc095fab9b3d4.png)
4. 在弹出的证书导入窗口中，选择您的证书文件。如下图所示：
![](https://main.qcloudimg.com/raw/7ebc3d08541300cd01ed27aae1c3a515.png)
 - **证书格式**：需要导入的数字证书格式，如果您是在腾讯云申请的代码数字签名证书，一般为 PFX。
 - **证书**：需要导入的“证书备份文件”路径。
 - **私钥**：需要导入的“证书私钥文件”路径（当“证书格式”为 PFX 时此选项不可用）。
 - **密码**：证书备份文件的“有效密码”。
 - **标记私钥可导出**： 使导入的证书私钥可导出。（注意：如果导入的证书不需要再导出备份，为了安全请不要“标记私钥可导出”！）。
5. 导入成功后，你可以在证书管理列表中看到刚才导入的证书，并且可以很方便的对证书进行查看和操作。如下图所示：
![](https://main.qcloudimg.com/raw/3299dbcd3e39ebc15bf54d9e82c42fcf.png)

### 步骤2：添加签名规则

1.  单击【签名规则】>【添加】。添加签名规则。如下图所示：
![](https://main.qcloudimg.com/raw/196df6d804379e99f80498d0c0f17324.png)
2. 在弹出的添加规则窗口中，选择并填写相关规则信息。如下图所示：
![](https://main.qcloudimg.com/raw/0bcda0f8f6258db914d8433e1f71a190.png)
#### 签名选项
- 规则名：主要是用来区分不同规则，随意即可。
- 证书：签名要使用的数字证书（必选，如若没有安装证书，可以先“[导入证书](1)”）。
- 文件扩展名：允许加入签名列表的文件类型，采用“;”隔开，一般默认即可。
- 包含子目录：批量签名时允许遍历子目录。
- 跳过有效签名文件：签名时跳过已经包含有效签名的文件，避免了其他有效签名被覆盖。

#### 签名信息（可选）
- 内容描述：主要用于 ActiveX 签名（效果见“图一.①”）。
- 信息 URL：主要用于 ActiveX 签名（效果见“图一.②”）。
- 时间戳服务：确保证书过期后，签名不过期。 “TrustAsia” 为 VeriSign 在国内的代理服务器，速度可能会快一些。

### 步骤3：模式选择
>!
>- 必须已经添加“签名规则”才能进行“数字签名”、“签名验证”等操作。
>- 如果已存在签名规则，默认情况下会自动选中第一条规则，以方便进行数字签名操作。

#### 模式选择
如下图所示：
![](https://main.qcloudimg.com/raw/ece6262af620e8309adbd91d07e6305a.png)
- 签名规则：可以快速切换签名规则。
- 签名方案：
>? 为了兼容新旧系统，推荐使用“双签名”方案。
>
  - **双签名**：使用 `SHA1` 与 `MS Authenticode` 时间戳 和 `SHA256` 与 `RFC3161` 时间戳同时进行签名，前者兼容 XP 等老系统，后者支持新系统并消除安全警告。
  - **SHA256 追加签名**：不覆盖第一个签名进行追加签名，使用 SHA256 + RFC3161 时间戳。
  - **SHA1/SH256 单签名**：会覆盖第一个签名。
  - **时间戳**：单独进行时间戳补签，支持给双签名分别采用不同的时间戳进行补签，解决漏签时间戳的情况。
- 模式选择：
>!为了避免一些不必要的问题请根据文件类型选择相应模式。
>
  - **应用模式**：一般用于应用程序、ActiveX 控件等非驱动程序的签名和验证。
  - **驱动模式**：用于对驱动的签名和验证， 会自动加入微软的交叉证书。
 


### 步骤4：数字签名
1. 选中用于签名的“签名规则”。
2. 添加要签名的“文件” 或直接“拖入”文件或文件夹到列表。
3. 单击【数字签名】并选择相应“签名方案”和 “模式”即可开始签名。

![](https://main.qcloudimg.com/raw/484412fdbb3a3cccc94a0110b2b21ebc.png)

### 步骤5：签名验证
您可以对文件进行签名验证，检查文件是否签名以及签名是否有效。
1. ，单击【签名验证】即可。



