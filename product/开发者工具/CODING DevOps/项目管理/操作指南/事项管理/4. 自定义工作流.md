本文为您详细介绍如何在 CODING 项目协同中配置自定义工作流。

## 进入项目

1. 登录 [CODING 控制台](https://console.cloud.tencent.com/coding)，单击【立即使用】进入 CODING 使用页面。
2. 单击页面右上角的 <img src ="https://main.qcloudimg.com/raw/d94a8e60dd3a41d0af07d72ae0e9d70e.png" style ="margin:0">，进入项目列表页面，单击项目图标进入目标项目。
3. 点击进入左侧菜单栏中的【项目协同】功能。

## [功能介绍](#intro)

自定义工作流能够满足不同团队的个性化需求，可以自定义所有事项（史诗、需求、任务、缺陷、子工作项）的工作流状态，固定流转方式，配置统一的流转规则，团队内不同项目的处理流程能够实现状态定义的一致性，提高跨项目与跨部门协作的效率。

本文将以 **【全局状态设置】** 与 **【项目内工作流配置】** 两个模块介绍如何自定义团队专属的工作流，操作顺序为：

1.  先创建全局状态，再从已有的全局状态中选择适用于项目内的各项工作流状态；

2.  工作流配置完成后，可在项目内各事项（史诗、用户故事、需求、任务、缺陷）中选取对应的状态。

## [全局状态设置](#global)

全局状态设置影响整个团队的事项状态，因此仅有开启【管理权限】的用户组成员才能修改或添加自定义状态，可在【团队管理】->【权限配置】->【用户组】中，在对应用户组内【权限配置】页查看详情。

![](https://help-assets.codehub.cn/enterprise/20210616164412.png)

确认权限后，前往团队首页，在左侧菜单中选择 【功能设置】，前往【项目协同】->【事项状态】，即可进入状态设置页面。

![](https://help-assets.codehub.cn/enterprise/20210629113949.png)

![](https://help-assets.codehub.cn/enterprise/20210629114145.png)

### [创建状态](#create)

通过右上方【创建状态】，填写状态名称、设定状态类型、添加状态描述（选填），即可创建自定义状态，事项状态名称不可重复。

![](https://help-assets.codehub.cn/enterprise/20210629134936.png)

### [修改/删除状态](#edit)

在任一状态末端的【操作】菜单中，可编辑或删除状态。

![](https://help-assets.codehub.cn/enterprise/20210629135332.png)

## [项目内工作流配置](#project)

工作流配置包括界定事项的状态与步骤，步骤表示事项从开始状态到目标状态的过程。进入任一项目后，在左侧菜单中进入【项目设置】->【项目协同】->【事项类型】，通过各事项末端的【工作流】选项，可自定义工作流。

![](https://help-assets.codehub.cn/enterprise/20210628204535.png)

![](https://help-assets.codehub.cn/enterprise/20210629142619.png)

例如：当一个需求处于【开发中】状态时，点击不同的步骤将会前往自定义配置的不同目标状态。

![](https://help-assets.codehub.cn/enterprise/20210616182549.png)

下文将以需求为例，演示如何自定义工作流。

### [设置状态](#status)

状态分为初始状态与目标状态，用于定义事项目前的所处阶段。

1.  选择【工作流】下方的【添加状态】。

![](https://help-assets.codehub.cn/enterprise/20210629142844.png)

2.  可在【状态】右侧下拉菜单中，选择在上文【全局状态设置】中已设置的状态。若在创建状态时打开【任何状态可转换到该状态】选项，则表示项目内的所有状态都可以切换至该目标状态。

![](https://help-assets.codehub.cn/enterprise/20210629143359.png)

3.  选择【添加】后，新状态将显示在工作流中。

![](https://help-assets.codehub.cn/enterprise/20210629144050.png)

### [设置步骤](#process)

步骤用于各状态间的流转，用于定义初始状态至目标状态时的流转过程。

1.  选择【工作流】下方的【创建步骤】。

![](https://help-assets.codehub.cn/enterprise/20210629144217.png)

2.  可以指定该步骤的【开始状态】和【目标状态】，步骤名称默认为目标状态，也可进行修改。确认后即可【创建】。

![](https://help-assets.codehub.cn/enterprise/20210629144400.png)

3.  也可以直接在【任何状态】栏中创建流转步骤，此时【开始状态】和【目标状态】由表格横列与纵列对应状态固定，仅能修改【步骤名称】。确认后即可【创建】。

![](https://help-assets.codehub.cn/enterprise/20210629143628.png)

![](https://help-assets.codehub.cn/enterprise/20210629145950.png)

4.  请在设置步骤时注意冲突。如下图所示，因为设置了【任何状态】都可以切换至【未开始】状态，因此覆盖了其他状态单独切换至【未开始】状态的步骤，仅生效【任何状态】->【未开始】步骤。

![](https://help-assets.codehub.cn/enterprise/20210629150201.png)

5.  选择任一步骤，在右侧【步骤设置】中，可以修改步骤名称、配置规则，并通过下方【删除该步骤】对该步骤进行删除。

![](https://help-assets.codehub.cn/enterprise/20210629151106.png)

### [配置规则](#rules)

在任意事项类型内，均可单独配置规则。选择【工作流】下方的【配置规则】，或选择某一指定状态，即可在右侧【步骤设置】->【规则】->【+】内，根据提示进行步骤的规则配置。共有四种类型：限制步骤权限、附加属性、更改处理人、更改属性值，每种类型下方均有描述，可根据团队需求进行配置。

![](https://help-assets.codehub.cn/enterprise/20210629175410.png)

![](https://help-assets.codehub.cn/enterprise/20210629175528.png)

#### [限制步骤权限](#permission)

默认所有步骤都不会限制成员执行，若配置了步骤权限，则将只允许规则中配置的成员才可执行步骤。

![](https://help-assets.codehub.cn/enterprise/20210404233051.png)

#### [附加属性](#additional-property)

该规则可配置多个属性组成表单，当状态变更时，成员需要录入配置的内容，状态才会进行变更。

![](https://help-assets.codehub.cn/enterprise/20210629180225.png)

#### [更改处理人](#processor)

若配置该规则，当状态变更后，将自动修改事项处理人。

![](https://help-assets.codehub.cn/enterprise/20210404233937.png)

#### [更改属性值](#property-value)

若配置该规则，当事项状态变更后，将自动修改已配置的属性值为指定的值。

![](https://help-assets.codehub.cn/enterprise/20210629180346.png)

**例 1：需要实现如下工作流，当步骤调整为【已完成】后，事项优先级调整为【低】。**

则可进行以下操作：选择【配置规则】中的【更改属性值】，选择【任何状态】->【已完成】步骤，并选择【优先级】属性，将属性值【更改为】【低】，即可实现上述工作流。

![](https://help-assets.codehub.cn/enterprise/20210629180915.png)

**例 2：当事项流转至【已完成】时，进度自动更新为 100%。**

则可进行以下操作：在【更改属性值】中选择当前步骤为【任何状态 -> 已完成】，将更改的属性选择为【进度】，填写进度为【100】，即可实现上述工作流。注意：在属性/任务工作流中均需进行配置。

![](https://help-assets.codehub.cn/enterprise/20210707164733.png)

### [工作流视图](#view)

工作流配置页包含两种视图：表格视图和列表视图。

-   在**表格视图**下，首列与首行分别表示开始状态与结束状态，表格内的方块表示状态变更时所提示的**步骤**。

![](https://help-assets.codehub.cn/enterprise/20210629181044.png)

-   在**列表视图**下，每个状态配有一个表格，表格内展示了由当前状态作为开始状态时，涉及的多个步骤与用户权限。

![](https://help-assets.codehub.cn/enterprise/20210629181143.png)

## [应用其他项目配置](#applicate)

项目协同支持复制其他项目中相应的属性和工作流配置，需要在首次启用项目协同功能时，选择【应用其他项目属性配置】。

![](https://help-assets.codehub.cn/enterprise/20210616191814.png)
