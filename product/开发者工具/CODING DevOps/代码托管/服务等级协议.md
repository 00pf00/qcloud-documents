## 操作场景
本文档主要介绍如何快速使用 CODING 代码托管。
- CODING 代码仓库基于开源的版本控制系统 —— Git。借助 Git，您的本地电脑与 CODING 会各有一个完整的代**为使用腾讯云 CODING 代码托管服务（以下简称“本服务”），您应当阅读并遵守《CODING 代码托管服务等级协议》（以下简称“本协议”或“SLA”），以及《腾讯云服务协议》。本协议包含本服务的术语和定义、服务可用性/服务成功率等级指标、赔偿方案、免责条款等相关内容。请您务必审慎阅读、充分理解各条款内容，限制、免责条款或者其他涉及您重大权益的条款可能会以加粗、加下划线等形式提示您重点注意。
  除非您已充分阅读、完全理解并接受本协议所有条款，否则，请您不要购买本服务。您单击“同意”、“下一步”或您的购买、使用等行为或者您以其他任何明示或者默示方式表示接受本协议的，即视为您已阅读并同意本协议的约束。本协议即在您与腾讯云之间产生法律效力，成为对双方均具有约束力的法律文件。**

  ## 1.	术语和定义
  ### 1.1	 CODING 代码托管服务
  腾讯云提供的 CODING 代码托管服务，是指腾讯云通过 CODING 代码托管为您提供的 Git/SVN 代码仓库服务，具体以您购买的服务以及腾讯云提供的服务内容为准。您可以通过本服务使研发团队在云端进行代码协同管理，获得便捷、高效的开发体验。
  ### 1.2	服务不可用
  CODING 代码托管服务在单位时间内（5 分钟为一个统计粒度）错误率大于 0.05%（不含本数），视为该单位时间服务不可用。在连续 10 分钟或更长时间内，CODING 代码托管服务均持续不可用才计入服务不可用时间，低于连续 10 分钟不计入服务不可用时间。
  错误率： 错误率是指由 CODING 代码托管返回的失败请求数占单位时间内（5分钟内）用户请求数的比例。
  失败请求：指 CODING 代码托管返回的错误码为服务器内部错误码的请求，包括 Internal Error（500错误） 或 Service Unavailable（503错误）两种错误码。但不包括触发频控导致的限流请求或者 CODING 代码托管升级、变更、停机而导致的失败请求。用户请求指的是 CODING 代码托管服务器端接收到的用户发送的请求，但不包括未经身份验证、鉴权失败或者欠费停服状态下的请求。用户端由于黑客攻击而对 CODING 代码托管的请求，或者由于配置了跨区域复制、生命周期规则而在后端异步执行的请求，均不视为有效请求或失败请求。
  ### 1.3	服务不可用时间
  服务不可用时间为服务月度内 CODING 代码托管服务不可用的分钟数之和。
  ### 1.4	服务月度
  服务月度是指您购买本服务的服务期限所包含的各个自然月度，如您购买三个月本服务，服务开通之日为 03 月 17 日，则包含 4 个服务月度，其中第 1 个服务月度是指 03 月 17 日到 03 月 31 日，第 2 个服务月度是指 04 月 01 日到 04 月 30 日，第 3 个服务月度是指 05 月 01 日到 05 月 31 日，第 4 个服务月度是指 06 月 01 日到 06 月16 日。服务可用性按服务月度单独核算。
  ### 1.5	月度服务费用
  月度服务费用指您在一个服务月度中就单 CODING 代码托管服务所实际消费的服务费用总额，不包含已经支付尚未消费的部分。月度服务费不含用代金券、优惠券、服务费减免等抵扣的费用。
  ## 2.	服务可用性/服务成功率计算方式
  ### 2.1	服务可用性计算方式
  服务可用性 =（1 - 服务不可用时间 / 服务月度内总时间）x 100%
  ### 2.2	服务可用性
  CODING 代码托管提供的服务可用性具体为：
  **代码托管服务可用性不低于99.8%。**假设当月为30天，即用户每月**代码托管服务**可用时间应为30天 x 24小时 x 60分钟 x 99.8% = 43113.6分钟，即允许存在43200 - 43178.4 =86.4分钟的不可用时间。
  如未达到上述可用性标准（属于免责条款情形的除外），您可以根据本协议第3条约定获得赔偿。
  ## 3.	赔偿方案
   对于本服务，如服务可用性低于本协议第2条约定标准，已付费购买服务的客户有权按照如下条款约定获得赔偿：
  ### 3.1	赔偿标准
  （1） 赔偿以腾讯云发放代金券的形式实现，您应当遵守代金券的使用规则（包括使用期限等，具体以腾讯云官网发布的代金券相关规则为准）。发放的代金券不能折现、不开具发票，仅限您通过您的腾讯云账户使用本服务，不能用于购买其他的腾讯云服务，您也不可以将代金券进行转让、赠予等。
  （2） 如果某服务月度没有达到服务可用性标准，赔偿额按照相应未达标服务月度单独计算，**赔偿总额不超过相应未达标服务月度内您就本服务支付的相应月度服务费（此处的月度服务费不含用代金券、优惠券、服务费减免等抵扣的费用）。**

  | 服务月度的服务可用性          | 赔偿代金券金额               |
  | ----------------------------- | ---------------------------- |
  | 低于 99.8% 但等于或高于 99.0% | 未达标服务总月度服务费的 10% |
  | 低于 99.0% 但等于或高于 95.0% | 未达标服务总月度服务费的 25% |
  | 低于 95.0%                    | 未达标服务总月度服务费的 50% |

  ### 3.2	赔偿申请时限
  （1） 如某服务月度没有达到服务可用性标准，您可以在没有达标的相应服务月度结束后的次月的第五（5）个工作日后，**仅通过您相应账户的工单系统提出赔偿申请。**您提出赔偿申请后腾讯云会进行相应核实，对于服务月度的服务可用性的计算，若双方出现争议的，**双方均同意最终以腾讯云的后台记录为准。**
  （2） **您最晚提出赔偿申请的时间不应超过未达标的相应服务月度结束后六十（60）个自然日。**如果您在未达标的相应服务月度结束后的六十（60）日内未提出赔偿申请或者在未达标的相应服务月度结束后的六十（60）日之后才提出赔偿申请或者您通过非本协议约定的方式提出申请的，均视为您自动放弃要求赔偿的权利及向腾讯云主张其他权利的权利，腾讯云有权不受理您的赔偿申请，不对您进行任何赔偿或补偿。
  ## 4.	免责条款
  **由以下原因导致的服务不可用，相应服务不可用时间不属于服务不可用的计算范畴和腾讯云的赔偿范畴，腾讯云以及CODING 代码托管服务团队无须向您承担责任：**
  4.1  腾讯云的 CODING 代码托管服务团队预先通知您需要进行系统维护所引起的，包括割接、维修、升级和模拟故障演练。
  4.2  任何腾讯云所属设备以外的网络、设备故障或配置调整引起的。
  4.3  日常系统维护时间、隐式依赖的云服务器服务、云数据盘服务、负载均衡服务、私有网络服务、云监控服务的不可用时间。
  4.4  构建任务所关联的用户代码仓库、第三方开源仓库、第三方镜像仓库不可连接导致的构建失败或构建长时间阻塞的。
  4.5  您的应用接口或数据受到攻击或其他不当行为引起的。
  4.6  您维护不当或保密不当致使数据、口令和密码等丢失或泄漏所引起的。
  4.7  由于您的疏忽授权、错误操作、自有设备或第三方软件、设备引起的。
  4.8  您未遵循 CODING 代码托管产品使用文档或使用建议引起的。
  4.9  您内容违规或其他原因而导致域名被封禁而产生的错误。
  4.10  您大规模流量突发增长未提前书面告知 腾讯云或CODING 代码托管服务团队所导致的可用性降低。
  4.11  非腾讯云的 CODING 代码托管服务团队或产品原因造成的服务不可用或服务不达标的情况。
  4.12  属于相关法律法规、相关协议、相关规则或腾讯云的 CODING 代码托管服务团队单独发布的相关规则、说明等中所述的 CODING 代码托管服务团队可以免责、免除赔偿责任等的情况。
  ## 5.	其他
  5.1  双方确认并在此认可：在任何情况下，若您在使用本服务过程中因腾讯云或腾讯云的 CODING 代码托管服务团队违约原因造成您损失的，腾讯云的违约赔偿总额不超过您已经支付的相应违约服务对应的服务费总额。
  5.2 腾讯云的CODING 代码托管服务团队有权根据变化适时或必要时对本协议条款做出修改，您可以在腾讯云官网的最新版本中查阅相关协议条款。如您不同意腾讯云的CODING 代码托管服务团队对协议所做的修改，您有权停止使用本服务，如您继续使用本服务，则视为您接受修改后的协议。
  5.3 本协议作为《腾讯云服务协议》的附属协议，具有与《腾讯云服务协议》同等效力，本协议未约定事项，您需遵守《腾讯云服务协议》的相关约定。若本协议与《腾讯云服务协议》中的条款相冲突或不一致，则以本协议为准，但仅在该冲突或不一致范围内适用。（完）码仓库，两者可以进行分布式的版本管理。

- 为了在您的本地电脑上管理代码，您需要先配置好 Git，包括下载安装、设置等操作。

- 如果您不需要在本地电脑上管理代码，CODING 支持在浏览器中实现大部分的代码仓库操作。

## 操作步骤
### 配置 Git
1. 下载安装最新版的 Git
请在 [Git 官网](https://git-scm.com/downloads) 下载最新版的程序并进行安装。
2. 在 Git 中设置用户名和邮箱
	1. 打开 Git Bash。
	- 设置您的用户名。
```shell
git config --global user.name "your_name" # 双引号内填入您的用户名
```
	- 设置您的邮箱（您的 CODING 账号邮箱）。
```shell
git config --global user.email "your_email@example.com" # 双引号内填入您的 CODING 账号邮箱
```


### 本地 Git 与 CODING 授权连接

为了把本地电脑上的 Git 与远程的 CODING 代码仓库连接到一起，您需要先进行授权。授权方式有 HTTPS 或者 SSH 两种协议可选。
#### 使用 HTTPS 授权连接
如果您使用形如 `https://e.coding.net/xxx.git` 的项目地址来克隆代码仓库，那么命令行会提示您输入您的 CODING 用户名和密码来授权连接，无需额外设置。
#### 使用 SSH 授权连接
如果您使用形如 `git@e.coding.net:xxx.git` 的项目地址来克隆仓库，那么您需要先配置好 SSH 密钥对来授权连接。
1. 打开 Git Bash。
2. 基于您填入的邮箱生成密钥对。
```shell
ssh-keygen -t rsa -b 4096 -C "your_email@example.com" # 双引号内填入您的 CODING 账号邮箱
```
3. 显示公钥。
```shell
cat ~/.ssh/id_rsa.pub # 默认存储在 ~/.ssh 目录下
```
4. 复制公钥，选择【个人设置】>【SSH公钥】，单击【新增公钥】，将公钥粘贴到“公钥内容”的框中，最后单击【添加】。

### 创建 CODING 代码仓库

在 CODING 中，一个项目对应一个代码仓库，所以想要创建代码仓库，就需要先创建项目并初始化代码仓库。
1. 新建项目
鼠标移到右上角的“＋”图标处，单击浮出来的【项目】，创建项目。
2. 填写项目基本信息
依次填入项目名称、地址、描述信息，其中项目地址即是代码仓库的地址，勾选“启用 README.md 文件初始化项目” ，单击【新建项目】完成创建。

此时在项目的【代码浏览】页，就可以看到刚建好的代码仓库了，里面有一份刚才初始化生成的 README.md 文本文件。

### 保存您对代码的修改
CODING 代码仓库支持在浏览器里对文件直接进行编辑修改、保存提交等操作。
1. 修改代码
	1. 单击【README.md】进入文件内容页。
	2. 单击【编辑】开始修改文件。
![](https://main.qcloudimg.com/raw/2b26d713d1d8383d855b526ad61d1d69.png)
2. 提交代码
	1. 填写提交说明，描述这次修改的内容。如果不填写，默认的提交说明是“更新文件 xxx”。
	2. 单击【提交到 master 分支】，将此次修改内容保存进代码仓库的 master 分支。
	3. 回到项目的“代码浏览”页面，即可以看到提交的操作记录、更新好了的内容。



### 克隆代码仓库到本地

#### 通过 HTTPS 协议克隆
1. 在“代码浏览”页面的仓库地址栏，选择 “HTTPS”，复制地址。
2. 在 Git Bash 中输入克隆命令。
```shell
git clone https://e.coding.net/xxx.git # 换成您复制的仓库地址
```

终端会提示输入您的用户名与密码。

#### 通过 SSH 协议克隆
1. 在【代码浏览】页面的仓库地址栏，选择“SSH”，复制地址。
2. 在 Git Bash 中输入克隆命令。
```shell
git clone git@e.coding.net:xxx.git # 换成您复制的仓库地址
```

终端会自动匹对您的本地私钥与之前存入 CODING 个人设置里的公钥，完成克隆。



### 本地代码推送至 CODING 仓库

1. 告诉 Git 要追踪哪些文件。
   例如我在本地的代码仓库新建了一个 “hello.c” 的文件，输入 `git add` 命令告诉 Git 开始追踪这个文件的版本变化。
```shell
git add hello.c
```
2. 将文件保存进代码仓库。
输入 `git commit` 命令将现在的文件版本保存进代码仓库里。
```shell
git commit -m "add hello.c" # 双引号里填入保存说明
```
3. 将本地的代码仓库推送至远程的 CODING 代码仓库。
以推送到远程 CODING 代码仓库的 master 分支为例，输入命令：
```shell
git push origin master
```
4. 查看效果。
刷新“代码浏览”页面，可以看到推送记录，以及与本地一样的代码仓库。

### 拉取 CODING 代码仓库至本地

如果您在 CODING 代码仓库里做了修改，可以通过 `git pull` 命令将远程的代码拉取（同步）到本地。
输入 `git pull` 命令更新本地仓库：
```shell
git pull
```

