分布式事务（Distributed Transaction Framework，简称 DTF）是腾讯云自主研发的高性能、高可用的分布式事务中间件，用于提供分布式的场景中，特别是微服务架构下的事务一致性服务。DTF 提供基于 TCC（Try、Confirm 和 Cancel 的简称）的 MT 模式，支持跨数据库、跨服务的使用场景，为金融、制造业、互联网等行业客户保驾护航。

## MT 模式
MT 模式（Manual Transaction Mode），用户可以根据自己的业务场景实现 Try，Confirm 和 Cancel 操作（TCC），目前 TCC 是现今被广泛应用的一种分布式事务模式。
MT 模式中，资源管理器（RM）可对跨数据库、跨服务的资源进行管理，使得对多个数据库的访问和对不同业务的操作，转变为一个原子操作，从而解决了复杂场景下事务的一致性问题。且 MT 模式中无全局行锁，每次操作对于数据库而言都属于本地操作，结束操作则事务结束，数据库资源释放，相比传统的 2PC  方案性能显著提升。
事务处理流程如下：
![](https://main.qcloudimg.com/raw/179b0a661ca9e6fcd16064e3ab18f6c4.png)
1. 事务发起者（TM）向 事务协调器（TC）申请开启一个全局事务，全局事务创建成功并申请注册一个全局事务 XID。
2. TM 将 XID 传给所调用的微服务（事务参与者）中。
3. 微服务中的资源管理器（RM）利用得到的全局事务 XID 向 TC 注册分支事务 ID，将其纳入 XID 对应全局事务的管辖。
4. RM 完成自身业务逻辑（即完成 TCC 中的 Try 阶段）
5. TM 向 TC 发起针对 XID 的全局提交（Commit）或回滚（Rollback），即 TCC 的二阶段。
6. TC 调度 XID 下管辖的全部分支事务完成提交（Commit）或回滚（Rollback）请求。


