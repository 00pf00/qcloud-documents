## 命名空间

Namespace=QCE/TDMYSQL

## 监控指标

| 指标英文名                       | 指标中文名             | 指标含义                                                     | 单位  | 维度                    | 统计周期                  |
| -------------------------------- | ---------------------- | ------------------------------------------------------------ | ----- | ----------------------- | ------------------------- |
| ActiveThreadCount                | 活跃线程数             | 实例级别监控指标， 计算方式为累加所有分片主备节点活跃线程数  | 个    | instanceid,instancetype | 60s、300s、 3600s、86400s |
| BinlogDiskAvailable              | 剩余 Binlog 日志磁盘空间 | 实例级别监控指标， 计算方式为累加各个分片 BinlogDiskAvailableShard 指标监控值 | GB    | instanceid,instancetype | 60s、300s、 3600s、86400s |
| BinlogUsedDisk                   | 已用 Binlog 日志磁盘空间 | 实例级别监控指标， 计算方式为累加各个分片主节点已用 Binlog 日志磁盘空间 | GB    | instanceid,instancetype | 60s、300s、 3600s、86400s |
| ConnUsageRate                    | DB 连接使用率           | 实例级别监控指标， 取值为实例所有分片主备节点的 DB 连接使用率的最大值 | %     | instanceid,instancetype | 60s、300s、 3600s、86400s |
| CpuUsageRate                     | CPU 利用率              | 实例级别监控指标，取值为实例所有分片主节点 CPU 使用率的最大值  | %     | instanceid,instancetype | 60s、300s、 3600s、86400s |
| DataDiskAvailable                | 可用数据磁盘空间       | 实例级别监控指标，计算方式为累加各个分片主节点可用数据磁盘空间 | GB    | instanceid,instancetype | 60s、300s、 3600s、86400s |
| DataDiskUsedRate                 | 数据磁盘空间利用率     | 实例级别监控指标，取值为实例各个分片主节点数据磁盘空间利用率最大值 | %     | instanceid,instancetype | 60s、300s、 3600s、86400s |
| DeleteTotal                      | DELETE 请求数           | 实例级别监控指标，计算方式为累加实例各个分片主节点的 Delete 请求数 | 次/秒 | instanceid,instancetype | 60s、300s、 3600s、86400s |
| InnodbBufferPoolReads            | innodb 磁盘读页次数     | 实例级别监控指标，计算方式为累加实例所有分片主备节点 innodb 磁盘读页次数 | 次    | instanceid,instancetype | 60s、300s、 3600s、86400s |
| InnodbBufferPool<br>ReadAhead    | innodb 缓冲池预读页次数 | 实例级别监控指标，计算方式为累加实例所有分片主备节点 innodb 缓冲池预读页次数 | 次    | instanceid,instancetype | 60s、300s、 3600s、86400s |
| InnodbBufferPool<br>ReadRequests | innodb 缓冲池读页次数   | 实例级别监控指标，计算方式为累加实例所有分片主备节点 innodb 缓冲池读页次数 | 次    | instanceid,instancetype | 60s、300s、 3600s、86400s |
| InnodbRowsDeleted                | innodb 执行 DELETE 行数   | 实例级别监控指标，计算方式为累加实例各个分片主节点 innodb 执行 DELETE 行数 | 行    | instanceid,instancetype | 60s、300s、 3600s、86400s |
| InnodbRowsInserted               | innodb 执行 INSERT 行数   | 实例级别监控指标，计算方式为累加实例各个分片主节点 innodb 执行 INSERT 行数 | 行    | instanceid,instancetype | 60s、300s、 3600s、86400s |
| InnodbRowsRead                   | innodb 执行 READ 行数     | 实例级别监控指标，计算方式为累加实例所有分片主备节点 innodb 执行 READ 行数 | 行    | instanceid,instancetype | 60s、300s、 3600s、86400s |
| InnodbRowsUpdated                | innodb 执行 UPDATE 行数   | 实例级别监控指标，计算方式为累加实例各个分片主节点 innodb 执行 UPDATE 行数 | 行    | instanceid,instancetype | 60s、300s、 3600s、86400s |
| InsertTotal                      | INSERT 请求数           | 实例级别监控指标，计算方式为累加实例各个分片主节点的 INSERT 请求数 | 次/秒 | instanceid,instancetype | 60s、300s、 3600s、86400s |
| LongQueryCount                   | 慢查询数               | 实例级别监控指标，计算方式为累加实例各个分片主节点的慢查询数 | 次    | instanceid,instancetype | 60s、300s、 3600s、86400s |
| MemAvailable                     | 可用缓存空间           | 实例级别监控指标，计算方式为累加实例各个分片主节点的可用缓存空间 | GB    | instanceid,instancetype | 60s、300s、 3600s、86400s |
| MemHitRate                       | 缓存命中率             | 实例级别监控指标，取值为实例各个分片主节点的缓存命中率最小值 | %     | instanceid,instancetype | 60s、300s、 3600s、86400s |
| ReplaceSelectTotal               | REPLACE_SELECT 请求数   | 实例级别监控指标，计算方式为累加实例各个分片主节点 REPLACE-SELECT 请求数 | 次/秒 | instanceid,instancetype | 60s、300s、 3600s、86400s |
| ReplaceTotal                     | REPLACE 请求数          | 实例级别监控指标，计算方式为累加实例各个分片主节点 REPLACE 请求数 | 次/秒 | instanceid,instancetype | 60s、300s、 3600s、86400s |
| RequestTotal                     | 总请求数               | 实例级别监控指标，计算方式为累加实例所有主节点总请求数和所有备节点的 Select 请求数 | 次/秒 | instanceid,instancetype | 60s、300s、 3600s、86400s |
| SelectTotal                      | SELECT 请求数           | 实例级别监控指标，计算方式为累加实例所有分片主备节点 SELECT 请求数 | 次/秒 | instanceid,instancetype | 60s、300s、 3600s、86400s |
| SlaveDelay                       | 备库延迟               | 实例级别监控指标，先计算各个分片的备延迟，然后取1个最大值作为这个实例的备延迟。分片的备延迟为这个分片的所有备节点延迟的最小值 | 秒    | instanceid,instancetype | 60s、300s、 3600s、86400s |
| UpdateTotal                      | UPDATE 请求数           | 实例级别监控指标，计算方式为累加实例各个分片主节点 UPDATE 请求数 | 次/秒 | instanceid,instancetype | 60s、300s、 3600s、86400s |
| ThreadsConnected                 | 当前打开连接数         | 实例级别监控指标，计算方式为累加实例所有分片主备节点当前打开连接数 | 次    | instanceid,instancetype | 60s、300s、 3600s、86400s |
| ConnMax                          | 最大连接数             | 实例级别监控指标，计算方式为累加实例所有分片主备节点最大连接数 | 个    | instanceid,instancetype | 60s、300s、 3600s、86400s |
| ClientConnTotal                  | 客户端总连接数         | 实例级别监控指标，计算方式为累加实例 Proxy 上的所有连接。这个指标真实展示了您有多少个客户端连到数据库实例上 | 个    | instanceid,instancetype | 60s、300s、 3600s、86400s |
| SQLTotal                         | SQL 错误数              | 实例级别监控指标，表示您有多少条 SQL 发往数据库实例            | 条    | instanceid,instancetype | 60s、300s、 3600s、86400s |
| ErrorSQLTotal                    | SQL 总数                | 实例级别监控指标，表示有多少条 SQL 执行错误                    | 条    | instanceid,instancetype | 60s、300s、 3600s、86400s |
| SuccessSQLTotal                  | SQL 成功数              | 实例级别监控指标，表示成功执行的 SQL 数量                      | 个    | instanceid,instancetype | 60s、300s、 3600s、86400s |
| TimeRange0                       | 耗时(<5ms)请求数       | 实例级别监控指标，表示执行时间小于5ms的请求数                | 次/秒 | instanceid,instancetype | 60s、300s、 3600s、86400s |
| TimeRange1                       | 耗时(5~20ms)请求数     | 实例级别监控指标，表示执行时间5-20ms的请求数                 | 次/秒 | instanceid,instancetype | 60s、300s、 3600s、86400s |
| TimeRange2                       | 耗时(20~30ms)请求数    | 实例级别监控指标，表示执行时间20~30ms的请求数                | 次/秒 | instanceid,instancetype | 60s、300s、 3600s、86400s |
| TimeRange3                       | 耗时(大于30ms)请求数   | 实例级别监控指标，表示执行时间大于30ms的请求数               | 次/秒 | instanceid,instancetype | 60s、300s、 3600s、86400s |
| MasterSwitchedTotal              | 主从切换次数           | 实例级别监控指标，表示实例主从切换发生的次数                 | 次    | instanceid,instancetype | 60s、300s、 3600s、86400s |
| IOUsageRate                      | IO 利用率               | 实例级别监控指标，取值为实例各个分片主节点 IO 利用率的最大值   | %     | instanceid,instancetype | 60s、300s、 3600s、86400s |

> ?每个指标的统计粒度（Period）可取值不一定相同，可通过 [DescribeBaseMetrics](https://cloud.tencent.com/document/product/248/30351) 接口获取每个指标支持的统计粒度

## 各维度对应参数总览

| 参数名称                       | 维度名称     | 维度解释           | 格式                                                         |
| ------------------------------ | ------------ | ------------------ | ------------------------------------------------------------ |
| Instances.N.Dimensions.0.Name  | instanceid   | 实例 ID 的维度名称 | 输入 String 类型维度名称：instanceid                         |
| Instances.N.Dimensions.0.Value | instanceid   | 具体实例 ID        | 输入实例具体 ID，例如：tdsql-9kjauqq1                        |
| Instances.N.Dimensions.0.Name  | instancetype | 实例类型的维度名称 | 输入 String 类型维度名称：instancetype                       |
| Instances.N.Dimensions.0.Value | instancetype | 具体实例类型       | 输入实例具体 ID，例如：1。<br>1： 主实例（独享型）, 2: 主实例, 3： 灾备实例, 4： 灾备实例（独享型） |

## 入参说明

云数据库 TDSQL 支持以下两种维度组合的查询方式，两种入参取值说明如下：

#### 1. 按实例 ID 入参取值如下：

&Namespace=QCE/TDMYSQL
&Instances.N.Dimensions.0.Name=instanceid
&Instances.N.Dimensions.0.Value=具体实例 ID

#### 2. 按实例类型入参取值如下： 
&Namespace=QCE/TDMYSQL
&Instances.N.Dimensions.0.Name=instancetype
&Instances.N.Dimensions.0.Value=具体实例类型
