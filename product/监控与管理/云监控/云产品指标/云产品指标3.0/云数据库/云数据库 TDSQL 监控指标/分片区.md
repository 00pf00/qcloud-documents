## 命名空间

Namespace=QCE/TDMYSQL

## 监控指标

| 指标英文名                            | 指标中文名             | 指标含义                                                     | 单位   | 维度               | 统计周期                  |
| ------------------------------------- | ---------------------- | ------------------------------------------------------------ | ------ | ------------------ | ------------------------- |
| CpuUsageRateShard                     | CPU 利用率              | 实例分片级别监控指标，取值为当前分片主节点 CPU 利用率          | %      | instanceid,shardid | 60s、300s、 3600s、86400s |
| DataDiskAvailableShard                | 可用数据磁盘空间       | 实例分片级别监控指标，取值为当前分片主节点可用数据磁盘空间   | GB     | instanceid,shardid | 60s、300s、 3600s、86400s |
| DataDiskUsedRateShard                 | 数据磁盘空间利用率     | 实例分片级别监控指标，取值为当前分片主节点数据磁盘空间利用率 | %      | instanceid,shardid | 60s、300s、 3600s、86400s |
| DeleteTotalShard                      | DELETE 请求数           | 实例分片级别监控指标，取值为当前分片主节点 DELETE 请求数       | 次/秒  | instanceid,shardid | 60s、300s、 3600s、86400s |
| IOUsageRateShard                      | IO 利用率               | 实例分片级别监控指标，取值为当前分片主节点 IO 利用率           | %      | instanceid,shardid | 60s、300s、 3600s、86400s |
| InnodbBufferPool<br>ReadsShard        | innodb 磁盘读页次数     | 实例分片级别监控指标，计算方式为累加当前分片所有主备节点 innodb 磁盘读页次数 | 次     | instanceid,shardid | 60s、300s、 3600s、86400s |
| InnodbBufferPool<br>ReadAheadShard    | innodb 缓冲池预读页次数 | 实例分片级别监控指标，计算方式为累加当前分片所有主备节点 innodb 缓冲池预读页次数 | 次     | instanceid,shardid | 60s、300s、 3600s、86400s |
| InnodbBufferPool<br>ReadRequestsShard | innodb 缓冲池读页次数   | 实例分片级别监控指标，计算方式为累加当前分片所有主备节点 innodb 缓冲池读页次数 | 次     | instanceid,shardid | 60s、300s、 3600s、86400s |
| InnodbRowsDeletedShard                | innodb 执行 DELETE 行数   | 实例分片级别监控指标，取值为当前分片主节点 innodb 执行 DELETE 行数 | 次     | instanceid,shardid | 60s、300s、 3600s、86400s |
| InnodbRowsInsertedShard               | innodb 执行 INSERT 行数   | 实例分片级别监控指标，取值为当前分片主节点 innodb 执行 INSERT 行数 | 次     | instanceid,shardid | 60s、300s、 3600s、86400s |
| InnodbRowsReadShard                   | innodb 执行 READ 行数     | 实例分片级别监控指标，计算方式为累加当前分片所有主备节点 innodb 执行 READ 行数 | 次     | instanceid,shardid | 60s、300s、 3600s、86400s |
| InnodbRowsUpdatedShard                | innodb 执行 UPDATE 行数   | 实例分片级别监控指标，取值为当前分片主节点 innodb 执行 UPDATE 行数 | 次     | instanceid,shardid | 60s、300s、 3600s、86400s |
| InsertTotalShard                      | INSERT 请求数           | 实例分片级别监控指标，取值为当前分片主节点 INSERT 请求数       | 次/秒  | instanceid,shardid | 60s、300s、 3600s、86400s |
| LongQueryCountShard                   | 慢查询数               | 实例分片级别监控指标，取值为当前分片主节点慢查询数           | 次     | instanceid,shardid | 60s、300s、 3600s、86400s |
| MasterSwitchedTotalShard              | 主从切换次数           | 实例分片级别监控指标，表示当前这个分片主备切换发生的次数     | 次     | instanceid,shardid | 60s、300s、 3600s、86400s |
| MemAvailableShard                     | 可用缓存空间           | 实例分片级别监控指标，取值为当前这个分片主节点可用缓存空间   | GB     | instanceid,shardid | 60s、300s、 3600s、86400s |
| MemHitRateShard                       | 缓存命中率             | 实例分片级别监控指标，取值为当前这个分片主节点缓存命中率     | %      | instanceid,shardid | 60s、300s、 3600s、86400s |
| ReplaceSelectTotalShard               | REPLACE_SELECT 请求数   | 实例分片级别监控指标，取值为当前这个分片主节点 REPLACE_SELECT 请求数 | 次/秒  | instanceid,shardid | 60s、300s、 3600s、86400s |
| ReplaceTotalShard                     | REPLACE 请求数          | 实例分片级别监控指标，取值为当前这个分片主节点 REPLACE 请求数  | 次/秒  | instanceid,shardid | 60s、300s、 3600s、86400s |
| RequestTotalShard                     | 总请求数               | 实例分片级别监控指标，计算方式为累加当前分片主节点总请求数和所有备节点 Select 请求数 | 次/秒  | instanceid,shardid | 60s、300s、 3600s、86400s |
| SelectTotalShard                      | SELECT 请求数           | 实例分片级别监控指标，计算方式为累加当前分片所有主备节点 SELECT 请求数 | 次/秒  | instanceid,shardid | 60s、300s、 3600s、86400s |
| SlaveDelayShard                       | 备延迟                 | 实例分片级别监控指标，取值为当前分片所有备机的备延迟最小值   | 秒     | instanceid,shardid | 60s、300s、 3600s、86400s |
| ThreadsConnectedShard                 | 当前打开连接数         | 实例分片级别监控指标，计算方式为累加当前分片所有主备节点的当前打开连接数 | 次     | instanceid,shardid | 60s、300s、 3600s、86400s |
| UpdateTotalShard                      | UPDATE 请求数           | 实例分片级别监控指标，取值为当前分片主节点 UPDATE 请求数       | 次/秒  | instanceid,shardid | 60s、300s、 3600s、86400s |
| ActiveThreadCountShard                | 活跃线程数             | 实例分片级别监控指标， 累加当前分片主备节点活跃线程数        | 个     | instanceid,shardid | 60s、300s、 3600s、86400s |
| BinlogDiskAvailableShard              | 剩余 Binlog 日志磁盘空间 | 实例分片级别监控指标， 取值为实例分片主备节点剩余 Binlog 日志磁盘空间最小值 | GBytes | instanceid,shardid | 60s、300s、 3600s、86400s |
| BinlogUsedDiskShard                   | 已用 Binlog 日志磁盘空间 | 实例分片级别监控指标， 取值为实例分片主节点已用 Binlog 日志磁盘空间 | GBytes | instanceid,shardid | 60s、300s、 3600s、86400s |
| ConnMaxShard                          | 分片最大连接数         | 实例分片级别监控指标， 取值为累加当前分片所有主备节点最大连接数 | 个     | instanceid,shardid | 60s、300s、 3600s、86400s |
| ConnUsageRateShard                    | 分片连接使用率         | 实例分片级别监控指标，取值为当前分片所有主备节点 DB 连接使用率的最大值 | %      | instanceid,shardid | 60s、300s、 3600s、86400s |

> ?每个指标的统计粒度（Period）可取值不一定相同，可通过 [DescribeBaseMetrics](https://cloud.tencent.com/document/product/248/30351) 接口获取每个指标支持的统计粒度

## 各维度对应参数总览

| 参数名称                       | 维度名称   | 维度解释             | 格式                                  |
| ------------------------------ | ---------- | -------------------- | ------------------------------------- |
| Instances.N.Dimensions.0.Name  | instanceid | 实例 ID 的维度名称   | 输入 String 类型维度名称：instanceid  |
| Instances.N.Dimensions.0.Value | instanceid | 具体实例 ID          | 输入实例具体 ID，例如：tdsql-9kjauqq1 |
| Instances.N.Dimensions.0.Name  | shardid    | 分片区 ID 的维度名称 | 输入 String 类型维度名称：shardid     |
| Instances.N.Dimensions.0.Value | shardid    | 具体分片区 ID        | 输入实例具体 ID，例如：shard-i6f4sf12  |

## 入参说明

云数据库 TDSQL 支持以下两种维度组合的查询方式，两种入参取值说明如下：

#### 1. 按实例 ID 入参取值如下：

&Namespace=QCE/TDMYSQL
&Instances.N.Dimensions.0.Name=instanceid
&Instances.N.Dimensions.0.Value=具体实例 ID

#### 2. 按节点 ID 入参取值如下： 
&Namespace=QCE/TDMYSQL
&Instances.N.Dimensions.0.Name=shardid
&Instances.N.Dimensions.0.Value=具体分片区 ID 
