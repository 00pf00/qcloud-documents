## 命名空间

Namespace=QCE/MARIADB

## 监控指标

| 指标英文名                           | 指标中文名             | 指标含义                                                     | 单位  | 维度              | 统计周期                  |
| ------------------------------------ | ---------------------- | ------------------------------------------------------------ | ----- | ----------------- | ------------------------- |
| ActiveThreadCountNode                | 活跃线程数             | DB 节点线程池活跃线程个数                                     | 个    | instanceid,nodeid | 60s、300s、 3600s、86400s |
| BinlogDiskAvailable                  | 剩余 Binlog 日志磁盘空间 | 实例级别监控指标， 取值为实例主备节点剩余 Binlog 日志磁盘空间最小值 | GB    | instanceid,nodeid | 60s、300s、 3600s、86400s |
| BinlogUsedDiskNode                   | 已用 Binlog 日志磁盘空间 | DB 节点已用 Binlog 日志磁盘空间                                 | GB    | instanceid,nodeid | 60s、300s、 3600s、86400s |
| ConnUsageRateNode                    | DB 连接使用率           | DB 节点连接使用率，计算方式为ThreadsConnected/ConnMax         | %     | instanceid,nodeid | 60s、300s、 3600s、86400s |
| CpuUsageRateNode                     | CPU 利用率              | DB 节点 CPU 使用率                                              | %     | instanceid,nodeid | 60s、300s、 3600s、86400s |
| DataDiskAvailableNode                | 可用数据磁盘空间       | DB 节点可用数据磁盘空间                                       | GB    | instanceid,nodeid | 60s、300s、 3600s、86400s |
| DataDiskUsedRateNode                 | 数据磁盘空间利用率     | DB 节点数据磁盘空间利用率                                     | %     | instanceid,nodeid | 60s、300s、 3600s、86400s |
| DeleteTotalNode                      | DELETE 请求数           | DB 节点 Delete 请求数                                           | 次/秒 | instanceid,nodeid | 60s、300s、 3600s、86400s |
| IOUsageRateNode                      | IO 利用率               | DB 节点 IO 利用率                                               | %     | instanceid,nodeid | 60s、300s、 3600s、86400s |
| InnodbBufferPoolReadsNode            | innodb 磁盘读页次数     | DB 节点 innodb 磁盘读页次数                                     | 次    | instanceid,nodeid | 60s、300s、 3600s、86400s |
| InnodbBufferPool<br>ReadAheadNode    | innodb 缓冲池预读页次数 | DB 节点 innodb 缓冲池预读页次数                                 | 次    | instanceid,nodeid | 60s、300s、 3600s、86400s |
| InnodbBufferPool<br>ReadRequestsNode | innodb 缓冲池读页次数   | DB 节点 innodb 缓冲池读页次数                                   | 次    | instanceid,nodeid | 60s、300s、 3600s、86400s |
| InnodbRowsDeletedNode                | innodb 执行 DELETE 行数   | DB 节点 innodb 执行 DELETE 行数                                   | 行    | instanceid,nodeid | 60s、300s、 3600s、86400s |
| InnodbRowsInsertedNode               | innodb 执行 INSERT 行数   | DB 节点 innodb 执行 INSERT 行数                                   | 行    | instanceid,nodeid | 60s、300s、 3600s、86400s |
| InnodbRowsReadNode                   | innodb 执行 READ 行数     | DB 节点 innodb 执行 READ 行数                                     | 行    | instanceid,nodeid | 60s、300s、 3600s、86400s |
| InnodbRowsUpdatedNode                | innodb 执行 UPDATE 行数   | DB 节点 innodb 执行 UPDATE 行数                                   | 行    | instanceid,nodeid | 60s、300s、 3600s、86400s |
| InsertTotalNode                      | INSERT 请求数           | DB 节点 INSERT 请求数                                           | 次/秒 | instanceid,nodeid | 60s、300s、 3600s、86400s |
| LongQueryCountNode                   | 慢查询数               | DB 节点慢查询数                                               | 次    | instanceid,nodeid | 60s、300s、 3600s、86400s |
| MemAvailableNode                     | 可用缓存空间           | DB 节点可用缓存空间                                           | GB    | instanceid,nodeid | 60s、300s、 3600s、86400s |
| MemHitRateNode                       | 缓存命中率             | DB 节点缓存命中率                                             | %     | instanceid,nodeid | 60s、300s、 3600s、86400s |
| ReplaceSelectTotalNode               | REPLACE_SELECT 请求数   | DB 节点 REPLACE-SELECT 请求数                                   | 次/秒 | instanceid,nodeid | 60s、300s、 3600s、86400s |
| ReplaceTotalNode                     | REPLACE 请求数          | DB 节点 REPLACE 请求数                                          | 次/秒 | instanceid,nodeid | 60s、300s、 3600s、86400s |
| RequestTotalNode                     | 总请求数               | DB 节点总请求数                                               | 次/秒 | instanceid,nodeid | 60s、300s、 3600s、86400s |
| SelectTotalNode                      | SELECT 请求数           | DB 节点 SELECT 请求数                                           | 次/秒 | instanceid,nodeid | 60s、300s、 3600s、86400s |
| SlaveDelayNode                       | 备延迟                 | DB 节点备延迟                                                 | 秒    | instanceid,nodeid | 60s、300s、 3600s、86400s |
| UpdateTotalNode                      | UPDATE 请求数           | DB 节点 UPDATE 请求数                                           | 次/秒 | instanceid,nodeid | 60s、300s、 3600s、86400s |
| ThreadsConnectedNode                 | 当前打开连接数         | DB 节点连接数，计算方式为 show processlist 得到的 session 个数    | 个    | instanceid,nodeid | 60s、300s、 3600s、86400s |
| ConnMaxNode                          | 最大连接数             | DB 节点最大连接数                                             | 次    | instanceid,nodeid | 60s、300s、 3600s、86400s |
| IsMaster                             | 是否为主 DB             | 表示这个 DB 节点是否为主 DB                                     | -     | instanceid,nodeid | 60s                       |

> ?每个指标的统计粒度（Period）可取值不一定相同，可通过 [DescribeBaseMetrics](https://cloud.tencent.com/document/product/248/30351) 接口获取每个指标支持的统计粒度

## 各维度对应参数总览

| 参数名称                       | 维度名称   | 维度解释           | 格式                                                         |
| ------------------------------ | ---------- | ------------------ | ------------------------------------------------------------ |
| Instances.N.Dimensions.0.Name  | instanceid | 实例 ID 的维度名称 | 输入 String 类型维度名称：instanceid                         |
| Instances.N.Dimensions.0.Value | instanceid | 具体实例 ID        | 输入实例具体 ID，例如：tdsql-9kjauqq1                        |
| Instances.N.Dimensions.0.Name  | nodeid     | 节点 ID 的维度名称 | 输入 String 类型维度名称：nodeid                             |
| Instances.N.Dimensions.0.Value | nodeid     | 具体节点 ID        | 输入实例具体ID，例如：9e89ddb89376a0a3885da35c4d44b5f75fda8d57 |

## 入参说明

云数据库 MariaDB 支持以下两种维度组合的查询方式，两种入参取值说明如下：

#### 1. 按实例 ID 入参取值如下：

&Namespace=QCE/MARIADB
&Instances.N.Dimensions.0.Name=instanceid
&Instances.N.Dimensions.0.Value=具体实例 ID

#### 2. 按节点 ID 入参取值如下： 
&Namespace=QCE/MARIADB
&Instances.N.Dimensions.0.Name=nodeid
&Instances.N.Dimensions.0.Value=具体节点 ID
