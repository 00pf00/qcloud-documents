## 命名空间

Namespace=QCE/TDMYSQL

## 监控指标

| 指标英文名                            | 指标中文名             | 指标含义                                                     | 单位   | 维度                   | 统计周期                  |
| ------------------------------------- | ---------------------- | ------------------------------------------------------------ | ------ | ---------------------- | ------------------------- |
| CpuUsageRateShard                     | CPU利用率              | 实例分片级别监控指标，取值为当前分片主节点CPU利用率          | %      | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| DataDisk<br>AvailableShard            | 可用数据磁盘空间       | 实例分片级别监控指标，取值为当前分片主节点可用数据磁盘空间   | GB     | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| DataDiskUsed<br>RateShard             | 数据磁盘空间利用率     | 实例分片级别监控指标，取值为当前分片主节点数据磁盘空间利用率 | %      | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| DeleteTotalShard                      | DELETE请求数           | 实例分片级别监控指标，取值为当前分片主节点DELETE请求数       | 次/秒  | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| IOUsageRateShard                      | IO利用率               | 实例分片级别监控指标，取值为当前分片主节点IO利用率           | %      | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| InnodbBufferPool<br>ReadsShard        | innodb磁盘读页次数     | 实例分片级别监控指标，计算方式为累加当前分片所有主备节点innodb磁盘读页次数 | 次     | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| InnodbBufferPool<br>ReadAheadShard    | innodb缓冲池预读页次数 | 实例分片级别监控指标，计算方式为累加当前分片所有主备节点innodb缓冲池预读页次数 | 次     | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| InnodbBufferPool<br>ReadRequestsShard | innodb缓冲池读页次数   | 实例分片级别监控指标，计算方式为累加当前分片所有主备节点innodb缓冲池读页次数 | 次     | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| InnodbRows<br>DeletedShard            | innodb执行DELETE行数   | 实例分片级别监控指标，取值为当前分片主节点innodb执行DELETE行数 | 次     | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| InnodbRows<br>InsertedShard           | innodb执行INSERT行数   | 实例分片级别监控指标，取值为当前分片主节点innodb执行INSERT行数 | 次     | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| InnodbRowsReadShard                   | innodb执行READ行数     | 实例分片级别监控指标，计算方式为累加当前分片所有主备节点innodb执行READ行数 | 次     | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| InnodbRows<br>UpdatedShard            | innodb执行UPDATE行数   | 实例分片级别监控指标，取值为当前分片主节点innodb执行UPDATE行数 | 次     | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| InsertTotalShard                      | INSERT请求数           | 实例分片级别监控指标，取值为当前分片主节点INSERT请求数       | 次/秒  | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| LongQueryCountShard                   | 慢查询数               | 实例分片级别监控指标，取值为当前分片主节点慢查询数           | 次     | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| MasterSwitched<br>TotalShard          | 主从切换次数           | 实例分片级别监控指标，表示当前这个分片主备切换发生的次数     | 次     | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| MemAvailableShard                     | 可用缓存空间           | 实例分片级别监控指标，取值为当前这个分片主节点可用缓存空间   | GB     | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| MemHitRateShard                       | 缓存命中率             | 实例分片级别监控指标，取值为当前这个分片主节点缓存命中率     | %      | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| ReplaceSelect<br>TotalShard           | REPLACE_SELECT请求数   | 实例分片级别监控指标，取值为当前这个分片主节点REPLACE_SELECT请求数 | 次/秒  | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| ReplaceTotalShard                     | REPLACE请求数          | 实例分片级别监控指标，取值为当前这个分片主节点REPLACE请求数  | 次/秒  | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| RequestTotalShard                     | 总请求数               | 实例分片级别监控指标，计算方式为累加当前分片主节点总请求数和所有备节点Select请求数 | 次/秒  | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| SelectTotalShard                      | SELECT请求数           | 实例分片级别监控指标，计算方式为累加当前分片所有主备节点SELECT请求数 | 次/秒  | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| SlaveDelayShard                       | 备延迟                 | 实例分片级别监控指标，取值为当前分片所有备机的备延迟最小值   | 秒     | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| ThreadsConnected<br>Shard             | 当前打开连接数         | 实例分片级别监控指标，计算方式为累加当前分片所有主备节点的当前打开连接数 | 次     | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| UpdateTotalShard                      | UPDATE请求数           | 实例分片级别监控指标，取值为当前分片主节点UPDATE请求数       | 次/秒  | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| ActiveThread<br>CountShard            | 活跃线程数             | 实例分片级别监控指标， 累加当前分片主备节点活跃线程数        | 个     | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| BinlogDisk<br>AvailableShard          | 剩余Binlog日志磁盘空间 | 实例分片级别监控指标， 取值为实例分片主备节点剩余Binlog日志磁盘空间最小值 | GBytes | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| BinlogUsedDiskShard                   | 已用Binlog日志磁盘空间 | 实例分片级别监控指标， 取值为实例分片主节点已用Binlog日志磁盘空间 | GBytes | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| ConnMaxShard                          | 分片最大连接数         | 实例分片级别监控指标， 取值为累加当前分片所有主备节点最大连接数 | 个     | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |
| ConnUsageRateShard                    | 分片连接使用率         | 实例分片级别监控指标，取值为当前分片所有主备节点DB连接使用率的最大值 | %      | InstanceId,<br>ShardId | 60s、300s、 3600s、86400s |

> ?每个指标的统计粒度（Period）可取值不一定相同，可通过 [DescribeBaseMetrics](https://cloud.tencent.com/document/product/248/30351) 接口获取每个指标支持的统计粒度

## 各维度对应参数总览

| 参数名称                       | 维度名称   | 维度解释           | 格式                                  |
| ------------------------------ | ---------- | ------------------ | ------------------------------------- |
| Instances.N.Dimensions.0.Name  | InstanceId | 实例 ID 的维度名称 | 输入 String 类型维度名称：InstanceId  |
| Instances.N.Dimensions.0.Value | InstanceId | 具体实例 ID        | 输入具体实例 ID，例如：tdsql-9kjauqq1 |
| Instances.N.Dimensions.1.Name  | ShardId    | 分片 ID 的维度名称 | 输入 String 类型维度名称：ShardId     |
| Instances.N.Dimensions.1.Value | ShardId    | 具体分片ID         | 输入分片 ID，例如：shard-i6f4sf12     |

## 入参说明

分布式数据库TDSQL MySQL版-分片监控指标入参说明下：

&Namespace=QCE/TDMYSQL
&Instances.N.Dimensions.0.Name=InstanceId
&Instances.N.Dimensions.0.Value=具体实例 ID
&Instances.N.Dimensions.1.Name=ShardId
&Instances.N.Dimensions.1.Value=具体分片 ID
