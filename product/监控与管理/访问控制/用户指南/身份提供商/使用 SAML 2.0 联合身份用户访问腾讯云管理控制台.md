
## 概述
腾讯云支持基于 SAML 2.0（安全断言标记语言 2.0）的联合身份验证，SAML 2.0 是许多身份验证提供商（Identity Provider， IdP）使用的一种开放标准。您可以通过基于 SAML 2.0 联合身份验证将身份提供商与腾讯云进行集成，从而实现身份提供商用户自动登录（单一登录）腾讯云控制台管理腾讯云的资源，不必为企业或组织中的每一个成员都创建一个 CAM 子用户。
以下步骤介绍了使用基于 SAML 2.0 联合身份验证实现联合单点登录（SSO）的流程
1. 用户通过浏览器访问身份提供商的门户网站，并选择跳转到腾讯云管理控制台。
2. 该门户网站可以验证当前用户的身份。
3. 该门户网站会生成一个 SAML 身份验证响应，其中包括识别用户身份的断言以及用户的相关属性，该属性指定控制台会话的有效时间长度。该门户网站将此响应发送到客户端浏览器。
4. 该客户端浏览器将被重定向到腾讯云单一登录终端节点并发布 SAML 断言。 
5. 终端节点将代表用户请求临时安全凭证，并创建一个使用这些凭证的控制台登录 URL。
6. 腾讯云将登录 URL 作为重定向发回客户端。
7. 该客户端浏览器将重定向到腾讯云管理控制台。如果 SAML 身份验证响应包含映射到多个 CAM 角色的属性，则系统将首先提示用户选择要用于访问控制台的角色。

## 操作场景
您可创建一个或多个角色作为身份提供商的载体登录腾讯云管理控制台，授予权限后可以在权限范围内通过腾讯云控制台管理主账号下的资源。
## 操作步骤
有关如何配置此行为的概述以及指向详细步骤的链接，请参阅以下章节。
### <span id="step配置身份提供商"></span>配置 CAM
在用户的企业组织的网络中，配置身份存储（例如 Windows Active Directory）以使用基于 SAML 2.0 的身份提供商，例如 Windows Active Directory 联合身份验证服务、Shibboleth 等。通过使用身份提供商，可以生成一个元数据文档，此文档将您的组织描述为身份提供并且包含身份验证密钥。另外，还要将组织的门户网站配置为将访问腾讯云管理控制台的用户请求路由至腾讯云终端节点，以便使用 SAML 断言进行身份验证。如何配置您的身份提供商来生成 metadata.xml 文件取决于您的身份提供商。
### 创建身份提供商
您可以在 CAM 控制台创建一个身份提供商，该身份提供商是访问管理（CAM）中包含您的组织的 IdP 的相关信息的实体。在创建过程中，您可以上传在[配置 CAM](#step配置身份提供商)中的身份提供商的元数据文档。有关详细信息，请参阅 [创建身份提供商](https://cloud.tencent.com/document/product/598/30290)。 
### 配置角色
您可以创建一个角色，将身份提供商的属性映射到腾讯云的属性，建立身份提供商和腾讯云的互信关系。在 SAML 2.0 断言上下文中，角色可分配给经身份提供商 (IdP) 验证身份的联合身份用户使用。此角色允许身份提供商请求临时安全证书进行腾讯云资源访问。在此过程中，您可以为该角色关联策略和设置使用条件，从而决定联合身份用户可在腾讯云资源的访问范围及该角色的使用条件。关于创建基于 SAML 2.0 联合身份验证的身份提供商的角色，请参阅 [为身份提供商创建角色](https://cloud.tencent.com/document/product/598/19381#.E9.80.9A.E8.BF.87.E6.8E.A7.E5.88.B6.E5.8F.B0.E5.88.9B.E5.BB.BA)。

### 配置身份提供商的单一登录
下载并保存腾讯云联合元数据XML文档，以向您的 SAML IdP 通知将腾讯云作为服务提供商：http://cloud.tencent.com/saml.xml 。安装该文件的方式取决于您的身份提供商。一些提供商为您提供了键入该 URL 的选项，此时，身份提供商将为您获取并安装该文件。另一些提供商则要求您从该 URL 处下载该文件，然后将其作为本地文件提供。
