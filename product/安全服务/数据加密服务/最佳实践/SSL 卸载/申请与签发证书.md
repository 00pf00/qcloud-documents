## 操作场景
按照实际业务需要产生 RSA/SM2/ECC 的证书申请文件并签发证书，测试阶段可以采用自签发证书，正式运行阶段建议从运营 CA 签发合格的服务器证书，也可以对接腾讯云证书服务产品去签发证书。

## 签发 RSA 算法的服务端证书（单证）
### 步骤1：产生证书申请文件
#### 方式1：通过 EVSM 的管理工具产生
1. 登录 VsmManager 软件，单击**密钥管理** > **非对称密钥管理** > **生成新密钥**，弹出产生非对称密钥弹窗。
![](https://qcloudimg.tencent-cloud.cn/raw/fdeba5f3775f76bdf0f2f4d0921061cd.png)
2. 在产生非对称密钥弹窗中，配置相关参数，单击**产生**，即可生成所需密钥。
![](https://qcloudimg.tencent-cloud.cn/raw/16a35e1aa572236b3a81d1421d6162fb.png)
**参数说明：**
 - 算法标识：RSA。
 - 密钥模长：2048。
 - 幂指数 e：65537。
 - 其他参数：按照实际需求填写。
3. 在非对称密钥管理弹窗中， 单击**生成 ECC 请求**，配置相关参数单击**确定**。
![](https://qcloudimg.tencent-cloud.cn/raw/30b74368dc7c0131058119c33cb6d71a.png)
**参数说明：**
 - 算法标识：SHA256WITHRSA。
 - 主题标识：/ 。
 - 主题：/C=CN/ST=BJ/L=HaiDian/O=Beijing JNTA Technology LTD./OU=BSRC of TASS/CN=rsa_commoname。
 - 使用内部索引：15。

#### 方式2：通过 tassl 配套脚本产生
1. 进入 `/root/tasshsm_engine/cert/server/rsa` 目录。
2. 设置环境变量 `source ./setting`。
3. 产生证书申请文件 S_RSA_HSM.csr
[root@localhost rsa]# ./gen_rsa_csr_with_hsm -r S_RSA_HSM.csr
请输入DN：/C=CN/ST=BJ/L=HaiDian/O=Beijing 
JNTA Technology LTD./OU=BSRC of TASS/CN=rsa_commoname/
请输入密钥模长[1024 - 2048]:2048
请选择摘要算法:1)SHA1
               2)SHA224
               3)SHA256
               4)SHA384
               5)SHA512
请输入:3
请输入加密机存储私钥的索引号：15

### 签发证书
测试阶段自签发证书：通过 tassl 配套脚本产生，具体如下：
1. 进入 `/root/tasshsm_engine/cert/server/rsa` 目录。
2. 设置环境变量 source ./setting
3. 签发S_RSA_HSM.crt
./sign_cert.sh S_RSA_HSM.csr S_RSA_HSM.crt

投产阶段从运营 CA 签发证书，也对接腾讯云证书服务产品进行签发。



