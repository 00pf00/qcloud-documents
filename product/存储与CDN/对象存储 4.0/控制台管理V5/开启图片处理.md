## 简介

本文介绍如何通过控制台使用 COS 的图片处理功能。您可以通过以下两种方式使用图片处理功能。如需了解图片处理的相关说明，请参见 [图片处理概述](https://cloud.tencent.com/document/product/436/42215)。

- **通过给图片 URL 添加参数**：您可以通过在图片的对象地址（URL）后添加相应参数来对图片进行相应的处理。
- **使用图片样式**：您可以通过创建样式的方式将不同的操作保存下来，然后使用样式对图片进行统一的处理。此处设置的样式是图片下载时，为实时处理参数组合起的一个别名。

> !
> - 仅支持国内公有云地域。
> - 图片处理功能为收费项，由数据万象收取，详细的计费说明请参见数据万象 [计费与定价](https://cloud.tencent.com/document/product/460/6970)。

## 添加 URL 参数


1. 登录 [对象存储控制台](https://console.cloud.tencent.com/cos5/bucket)。
2. 找到图片所在的存储桶，单击其存储名称，进入存储桶管理页面。
3. 在图片文件的右侧操作栏下，单击【详情】进入文件详情页。
4. 复制【对象地址】，并粘贴到浏览器窗口地址栏中。
5. 在地址栏中，按以下格式在对象地址后面添加相应的参数：
```sh
对象地址?处理接口名称/处理操作名称/处理参数
```

**示例：缩放图片宽高为原图50%**，原图如下：

![img](https://main.qcloudimg.com/raw/3d4682ff8e622425ebd29913810a5c38.jpeg)

首先假设对象地址 URL 为`https://examplebucket-1250000000.cos.ap-chengdu.myqcloud.com/sample.jpeg`，然后添加如下参数：

- 缩放处理接口：imageMogr2
- 缩放操作名称：thumbnail
- 处理参数：!50p

则处理后的地址为：`https://examplebucket-1250000000.cos.ap-chengdu.myqcloud.com/sample.jpeg?imageMogr2/thumbnail/!50p`。

处理后效果图：
![](https://main.qcloudimg.com/raw/15f3ad8744af8b035c9772ad661ef2ce.png)

> !
> - 处理图片需要有对象写权限，有关对象权限设置可参见 [设置对象的访问权限](https://cloud.tencent.com/document/product/436/13327)。
> - 处理图片时需确认好对象读权限，私有读对象需在带有签名的地址上添加图片处理参数。

有关更多的图片处理参数及说明，请参见 [数据万象基础图片处理](https://cloud.tencent.com/document/product/460/6924) API 文档。

## 使用图片样式

图片样式功能可以帮助您将不同的处理操作参数以模板的形式呈现，通过样式对图片进行统一的处理。此处设置的样式是图片下载时为实时处理参数组合起的一个别名。以设置【限定图片缩放为宽480px，高270px】的样式为例，具体操作如下：

1. 登录 [对象存储控制台](https://console.cloud.tencent.com/cos5/bucket)。
2. 找到图片所在的存储桶，单击其存储名称，进入存储桶管理页面。
3. 在左侧菜单栏中，单击【图片处理】，进入图片处理页面。
4. 选择【分隔符】，样式分隔符是分割文件名称和处理样式的符号，包含中划线（-）、下划线( _ )、斜杠（/）和感叹号（!）
5. 单击【添加样式】进入编辑样式界面，可以进行图片的基本处理、文字或图片水印等操作。
6. 限定图片缩放为宽480px，高270px，您可以进行以下配置：
	- 样式名称：自定义样式名称。
	- 编辑模式：选择基本编辑。
	- 基本处理中的缩略方式：选择只缩放。
	- 缩放选择：选择限定宽高缩放。
	- 缩略尺寸：宽480px，高270px。
	- 渐进显示：默认不开启，开启后，访问图片时以渐进显示的方式展现。
	- 输出格式：可选图片输出的格式，默认原图。
7. 设定好后，可以单击右侧预览查看预览效果。
8. 单击【保存】，一个图片样式即添加完毕。
>!
> - 样式名需要区分大小写，且保存之后不可修改。
> - 图片处理功能仅支持国内公有云地域。

#### 使用说明

格式：对象地址 + 分隔符 + 处理样式名
则原图的经过样式 yunstyle 处理后的图片 URL 为：`https://example-1250000000.cos.ap-chengdu.myqcloud.com/sample.jpeg!yunstyle`

>!
> - 同一存储桶下最多可设置100条样式。
> - 为避免歧义，处理样式名中不可出现当前所启用的间隔标志符。
> - 设置生效时间平均为30分钟。
> - 更改分隔符需清除缓存，全网生效至少需要24小时。
> - 取消已使用的分隔符，可能导致产品功能异常。

#### 实际案例

以上述**添加 URL 参数**中的原图为例：

对象地址：`https://example-1250000000.cos.ap-chengdu.myqcloud.com/sample.jpeg`
分隔符：!（感叹号）
样式名：yunstyle

则原图的经过样式 yunstyle 处理后的图片 url 为：`https://example-1250000000.cos.ap-chengdu.myqcloud.com/sample.jpeg!yunstyle`

效果图：


![](https://main.qcloudimg.com/raw/15f3ad8744af8b035c9772ad661ef2ce.png)

>? 有关图片样式更多的具体说明，请参见 [样式设置](https://cloud.tencent.com/document/product/460/6936)。

