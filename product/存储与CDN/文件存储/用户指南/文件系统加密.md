CFS 文件存储支持传输加密及存储加密功能。您可以在创建文件系统的时候启用存储加密，在挂载文件系统的时候启用传输加密。点击[申请使用]()。

事项 | 限制 |说明
-----|----|----
地域限制 | 香港 |目前仅香港地区支持传输加密及静态存储加密
传输加密-文件访问协议 |  目前仅支持 NFS v4.0| 若需启用传输加密，需要使用 NFS v4.0 协议挂载文件系统，其他版本及协议暂不支持。
传输加密-客户端限制 | 目前仅支持 Linux、 Unix 内核的操作系统上配置传输加密 | 暂不支持 Window 客户端配置传输加密。


## 加密传输中的数据
由于协议特性，使用 NFS 协议访问文件系统中的通信信息均为明文传输。在特殊场景下，业务要求对客户端与文件系统交互的信息进行加密。 针对此种业务需求，腾讯云 CFS 提供了在挂载文件系统时启用传输层安全性(TLS) 的方式，实现数据传输的加密。

本案例以在 CentOS 上使用 Stunnel （Stunnel 是一种开源多用途网络中继服务）启用传输加密为例，您也可以采用其他提供 TLS/SSL 功能的应用自行配置传输加密。启用传输加密的步骤如下，

1.下载并安装 Stunnel。
```
yum install -y stunnel

```
若在云主机公共镜像中启用 Stunnel 异常， 可[提交工单](https://console.cloud.tencent.com/workorder/category?level1_id=6&level2_id=7&source=0&data_title=%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8CVM&level3_id=161&radio_title=%E4%BD%BF%E7%94%A8/%E5%85%B6%E4%BB%96%E9%97%AE%E9%A2%98%E5%92%A8%E8%AF%A2&queue=15&scene_code=12713&step=2)报障。

2.修改 Stunnel 权限，在 /var/run/ 目录下创建一个名为 stunnel 的目录，权限设置为所有用户皆可操作。
```
chmod 777 stunnel
```

3. 在 /etc/stunnel 目录下创建一个 stunnel.conf 文件，并将下列字段复制进去。
```
root = /var/run/stunnel/
pid = /stunnel.pid
client = yes
[nfs]
accept = 2049
connect = cfs_ip:22049
```

4. 上述中的 cfs_ip 替换为欲挂载的 CFS 实例的IP地址。
```
例如
connect = 10.0.0.1:22049
```

5. 启动 stunnel 服务。
```
/usr/bin/stunnel /etc/stunnel/stunnel.conf
```

6. 挂载文件系统，实现传输加密。
```
/以下 localhost 为云主机的 localhost, localfolder 为目标挂载路径。
mount -t nfs -o vers=4.0,rw,sync  localhost:/ /localfolder
```

## 静态加密数据
除了在传输过程中加密，某些业务场景还要求对存储的数据进行加密。CFS 文件存储提供静态存储数据加密功能，以保障数据的私密性。
CFS 文件存储使用腾讯云密钥管理服务(KMS) 提供的密钥，并使用 AES-256 算法来进行数据的静态加密。当您启用了文件系统的加密功能后，业务无需关心加解密程序，存储加密过程对于您的业务系统来说完全透明。

您可以在创建文件系统时，选择是否要加密文件系统。
1. 打开[CFS控制台](https://console.cloud.tencent.com/cfs)；
2. 点击 【创建】 按钮，打开创建文件系统弹窗；
3. 选择香港地区、填入其他参数后，点击下一步；
4. 勾选【启用数据加密】。 首次使用时，需要您授权 CFS 服务可以访问您 KMS ；授权的同时，系统会为每个用户默认生成一个唯一的、供 CFS 服务使用的密钥，您新建的文件系统将默认使用该密钥进行加密；授权完成后，回到 CFS 控制台，点击完成即可创建加密的文件系统。说明，目前仅支持使用默认密钥为存储到 CFS 上的数据进行加密。
5. 创建好加密的文件系统后， 即可像使用其他文件系统一样挂载并使用了。挂载方法参考[ 在 Linux 客户端上使用 CFS 文件系统](https://cloud.tencent.com/document/product/582/11523)。

注意：文件系统创建时设置了加密选项后，后续将无法更改文件系统加密属性（含加密状态及所使用密钥）。