## 概述

您可以通过数据加工，完成日志数据的过滤清洗、脱敏、富化，最后分发到目标日志主题。 下面将为您详细介绍如何创建数据加工任务。
日志加工是将一个“源日志主题”中的日志数据，经过 DSL 函数处理，发送到一个或者多个“目标日志主题”。

## 前提条件

- 已开通日志服务，创建源日志主题、并成功采集到日志数据。
- 已创建目标日志主题。建议目标日志主题为空主题，便于加工好的数据写入。
- 确保当前操作账号拥有配置数据加工任务的权限。

## 操作步骤

1. 登录 [日志服务控制台](https://console.cloud.tencent.com/cls)。
2. 在左侧导航栏中，单击**数据加工**。  
![](https://qcloudimg.tencent-cloud.cn/raw/abc1eff40fdfa027ad36a2496a02cdbb.png)
3. 单击**新建加工任务**。
4. 在**基本信息**页面，设置如下信息：
![](https://qcloudimg.tencent-cloud.cn/raw/fa5486852817e1ba1163d782b3cb0bd2.jpg)
 - 任务名称：请输入自定义的任务名称。
 - 源日志主题：请选择源日志主题
 - 目标日志主题：请输入目标名称，选择日志主题。
 其中，目标名称可以理解为目标日志主题的别名，主要用作为编写 DSL 函数的入参。目标日志主题最多可以输入10个。
5. 单击**下一步**。
6. 在**编辑加工语句**页面，进行如下操作：
 1. 选择**自定义数据**页签，输入自定义数据。您也可以选择**原始数据**页签的数据，单击**加入自定义数据**，然后对其进行修改，作为您的自定义数据。
>! 
> - 自定义的数据必须为 JSON 格式。
> - 原始日志数据默认为100条。
> 
 自定义的数据如有多条，可参照如下格式添加：
```
[
    {
        "content": "2021-10-07 13: 32: 21|100|客人未入住|韦小宝|北京|101123199001230123|"
    },
    {
        "content": "2021-10-07 13: 32: 21|500|入住成功|阿珂|三亚|501123199001230123|"
    },
    {
        "content": "2021-10-07 13: 32: 21|1000|退房|韦春花|三亚|101123196001230123|"
    }
]
```
 2. 单击 **DSL语句生成器**。
<img src="https://qcloudimg.tencent-cloud.cn/raw/8d2ab0b0e22e7db215f75684640819e0.png" style="width: 90%" />
 3. 在弹出的窗口中，选择函数，单击**插入函数**。
DSL 语句生成器提供了多种函数的说明和示例，您可以将示例复制/粘贴到加工语句的编辑框中，修改对应的参数，完成 DSL 函数的编写；也可以参考 [加工示例](https://cloud.tencent.com/document/product/614/63924) 文档，帮助您更快地理解 DSL 函数的编写。 
<img src="https://qcloudimg.tencent-cloud.cn/raw/59b3768885793fdad6412235790de27c.jpg" style="width: 45%" /></br> 
 4. 完成 DSL 加工语句的编写后，单击**预览**或者**断点调试**，运行和调试 DSL 函数。
运行结果会在右下方展示，您可以针对运行结果，调整 DSL 语句，直到满足您的需求。
![](https://qcloudimg.tencent-cloud.cn/raw/b60cbbf07218f6e13d58dbbb806f5921.jpg)
10. 单击**确定**，提交数据加工任务。







 
