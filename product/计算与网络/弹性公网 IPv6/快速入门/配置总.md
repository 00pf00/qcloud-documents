## 手动配置 IPv6 地址
### 步骤1：检查实例是否已开启 IPv6 服务
1. 远程连接实例。具体操作，请参见 [登录及远程连接](https://cloud.tencent.com/document/product/213/17278)。
2. 执行如下命令，检查实例是否已开启 IPv6 服务。
```
ip addr | grep inet6
或者
ifconfig | grep inet6
```
 - 若实例未开启 IPv6 服务，请根据下文继续开启 IPv6 服务。 
 - 若返回`inet6`相关内容，表示实例已成功开启 IPv6 服务，您可以跳过第二步继续操作。

### 步骤2：开启 IPv6 服务
#### Tlinux 的操作步骤如下：
1. 远程连接实例。具体操作，请参见 [登录及远程连接](https://cloud.tencent.com/document/product/213/17278)。
2. 执行如下命令，打开`etc`文件夹下的`sysctl.conf`文件。
	 ```
	 vi /etc/sysctl.conf
	 ```
3. 按 “i” 切换至编辑模式，将如下的 IPv6 相关参数设置为0。
	```
	#net.ipv6.conf.all.disable_ipv6 = 1
	#net.ipv6.conf.default.disable_ipv6 = 1
	#net.ipv6.conf.lo.disable_ipv6 = 1
	
	net.ipv6.conf.all.disable_ipv6 = 0
	net.ipv6.conf.default.disable_ipv6 = 0
	net.ipv6.conf.lo.disable_ipv6 = 0
	```
4. 按 “Esc”，输入`:wq`并回车，保存文件返回后，执行如下命令使配置生效。
	```
	sysctl -p
	```

#### CentOS 6 的操作步骤如下：
1. 远程连接实例。具体操作，请参见 [登录及远程连接](https://cloud.tencent.com/document/product/213/17278)。
2. 执行如下命令，打开`/etc/modprobe.d/`文件夹下的`ipv6.conf`文件。
	```
	vi /etc/modprobe.d/ipv6.conf
	```
3. 按 “i” 切换至编辑模式，将如下的内核参数设置为0。
	```
	#options ipv6 disable=1
	options ipv6 disable=0
	```
4. 执行如下命令，打开`etc`文件夹下的`sysctl.conf`文件。
  ```
  vi /etc/sysctl.conf
  ```
5. 按 “i” 切换至编辑模式，将如下的 IPv6 相关参数设置为0。
	```
	#net.ipv6.conf.all.disable_ipv6 = 1
	#net.ipv6.conf.default.disable_ipv6 = 1
	#net.ipv6.conf.lo.disable_ipv6 = 1
	
	net.ipv6.conf.all.disable_ipv6 = 0
	net.ipv6.conf.default.disable_ipv6 = 0
	net.ipv6.conf.lo.disable_ipv6 = 0
	```
6. 按 “Esc”，输入`:wq`并回车，保存文件返回后，执行如下命令使配置生效。
	```
	sysctl -p
	```

#### CentOS 7 的操作步骤如下：
1. 远程连接实例。具体操作，请参见 [登录及远程连接](https://cloud.tencent.com/document/product/213/17278)。
2. 执行如下命令，打开`etc`文件夹下的`sysctl.conf`文件。
  ```
  vi /etc/sysctl.conf
  ```
3. 按 “i” 切换至编辑模式，将如下的 IPv6 相关参数设置为0。
	```
	#net.ipv6.conf.all.disable_ipv6 = 1
	#net.ipv6.conf.default.disable_ipv6 = 1
	#net.ipv6.conf.lo.disable_ipv6 = 1
	
	net.ipv6.conf.all.disable_ipv6 = 0
	net.ipv6.conf.default.disable_ipv6 = 0
	net.ipv6.conf.lo.disable_ipv6 = 0
	```
4. 按 “Esc”，输入`:wq`并回车，保存文件返回后，执行如下命令使配置生效。
	```
	sysctl -p
	```

#### CoreOS 17 的操作步骤如下：
1. 远程连接实例。具体操作，请参见 [登录及远程连接](https://cloud.tencent.com/document/product/213/17278)。
2. 执行如下命令，打开`/usr/share/oem/`文件夹下的`grub.cfg`文件。
 ```
 vi /usr/share/oem/grub.cfg
 ```
3. 按 “i” 切换至编辑模式，删除`ipv6.disable=1`这一行，按 “Esc”，输入`:wq`并回车，保存文件。
4. 分别执行`vi /etc/sysctl.conf`和`vi /etc/sysctl.conf.first`，打开对应的文件。
5. 按 “i” 切换至编辑模式，对以上两个文件均做出如下修改：
     ```
     #net.ipv6.conf.all.disable_ipv6 = 1
     #net.ipv6.conf.default.disable_ipv6 = 1
     #net.ipv6.conf.lo.disable_ipv6 = 1
     
     net.ipv6.conf.all.disable_ipv6 = 0
     net.ipv6.conf.default.disable_ipv6 = 0
     net.ipv6.conf.lo.disable_ipv6 = 0
     ```
6. 修改完成后，重启实例。

#### Debian 8/9 的操作步骤如下：
1. 远程连接实例。具体操作，请参见 [登录及远程连接](https://cloud.tencent.com/document/product/213/17278)。
2. 执行如下命令，打开`etc`文件夹下的`sysctl.conf`文件。
  ```
  vi /etc/sysctl.conf
  ```
3. 按 “i” 切换至编辑模式，将如下的 IPv6 相关参数设置为0。
	```
	#net.ipv6.conf.all.disable_ipv6 = 1
	#net.ipv6.conf.default.disable_ipv6 = 1
	#net.ipv6.conf.lo.disable_ipv6 = 1
	
	net.ipv6.conf.all.disable_ipv6 = 0
	net.ipv6.conf.default.disable_ipv6 = 0
	net.ipv6.conf.lo.disable_ipv6 = 0
	```
4. 按 “Esc”，输入`:wq`并回车，保存文件返回后，执行如下命令使配置生效。
	```
	sysctl -p
	```

#### FreeBSD 11 的操作步骤如下：
**脚本方式：**
>? 
>- 此方式已完成了 IPv6 的开启和配置，无需再进行后面 IPv6 的配置。
>- 本脚本会重启网络，谨慎执行。

1. 远程连接实例。具体操作，请参见 [登录及远程连接](https://cloud.tencent.com/document/product/213/17278)。
2. 将如下脚本拷贝到 `shell 文件`中，这里以 `test.sh` 为例：
  ```
  key_value_editer() 
  {
      local file=$1
      local key=$2
      local value=$3
      
      [ ! -f "$file" ] && return
  
      if ! grep -i "^${key}[[:space:]]*=" "$file" &>/dev/null; then
          echo "$key=$value" >> "$file"
      else
          value=${value//\//\\/}
          sed -i "s/^${key}[[:space:]]*=.*/$key=$value/" "$file"
      fi
  }
  
  dev=$1
  ipv6=$2
  prefix_len=$3
  rc_conf_file="/etc/rc.conf"
  if [ ! -f "$rc_conf_file" ]; then
  	exit 1
  fi
  # enable ipv6
  sed -i -e "s/ipv6_network_interfaces='none'//" $rc_conf_file
  sed -i -e "s/ipv6_activate_all_interfaces='NO'//" $rc_conf_file
  key_value_editer "$rc_conf_file" "ipv6_activate_all_interfaces" "'YES'"
  
  tail="_ipv6"
  # config ipv6 address
  echo "ifconfig_$dev$tail='inet6 $ipv6 prefixlen $prefix_len'" >> /etc/rc.conf
  
  # config ipv6 defaultrouter
  netip=$(echo $ipv6 | awk -F":" '{print $1":"$2":"$3":"$4}')
  
  echo "ipv6_defaultrouter='$netip::1'" >> /etc/rc.conf
  
  /etc/netstart restart
  ```
  - dev 表示网卡设备名，如 eth0、eth1。
  - ip6 表示本机的 IPv6 地址，如 `2607:f0d0:1002:0011:0000:0000:0000:0002`。
  - prefix_len 表示子网前缀长度，如 `64`。
3. 使用举例如下：
  ```
  sh ./test.sh vtnet0 2402:4e00:1000:4200:0:8f0c:d527:b985 64
  ```

**手动方式：**
1. 远程连接实例。具体操作，请参见 [登录及远程连接](https://cloud.tencent.com/document/product/213/17278)。
2. 执行如下命令，打开`etc`文件夹下的`rc.conf`文件。
	```
	vi /etc/rc.conf
	```
3. 按 “i” 切换至编辑模式，删除`ipv6_network_interfaces='none'`，并将如下参数设置为`YES`。
	```
	#ipv6_activate_all_interfaces='NO'
	
	ipv6_activate_all_interfaces='YES'
	```
4. 按 “Esc”，输入`:wq`并回车，保存文件返回后，执行如下命令重启网络。
	```
	/etc/netstart restart
	```

#### OpenSUSE 42 的操作步骤如下：
1. 远程连接实例。具体操作，请参见 [登录及远程连接](https://cloud.tencent.com/document/product/213/17278)。
2. 执行如下命令，打开`etc`文件夹下的`sysctl.conf`文件。
  ```
  vi /etc/sysctl.conf
  ```
3. 按 “i” 切换至编辑模式，将如下的 IPv6 相关参数设置为0。
	```
	#net.ipv6.conf.all.disable_ipv6 = 1
	#net.ipv6.conf.default.disable_ipv6 = 1
	#net.ipv6.conf.lo.disable_ipv6 = 1
	
	net.ipv6.conf.all.disable_ipv6 = 0
	net.ipv6.conf.default.disable_ipv6 = 0
	net.ipv6.conf.lo.disable_ipv6 = 0
	```
4. 按 “Esc”，输入`:wq`并回车，保存文件返回后，执行如下命令使配置生效。
	```
	sysctl -p
	```

#### SUSE 10 的操作步骤如下：
1. 远程连接实例。具体操作，请参见 [登录及远程连接](https://cloud.tencent.com/document/product/213/17278)。
2. 执行如下命令，打开`etc`文件夹下的`sysctl.conf`文件。
  ```
  vi /etc/sysctl.conf
  ```
3. 按 “i” 切换至编辑模式，将如下的 IPv6 相关参数设置为0。
	```
	#net.ipv6.conf.all.disable_ipv6 = 1
	#net.ipv6.conf.default.disable_ipv6 = 1
	#net.ipv6.conf.lo.disable_ipv6 = 1
	
	net.ipv6.conf.all.disable_ipv6 = 0
	net.ipv6.conf.default.disable_ipv6 = 0
	net.ipv6.conf.lo.disable_ipv6 = 0
	```
4. 按 “Esc”，输入`:wq`并回车，保存文件返回后，执行如下命令使配置生效。
	```
	sysctl -p
	```
	
#### Ubuntu 14、16、18 的操作步骤如下：
1. 远程连接实例。具体操作，请参见 [登录及远程连接](https://cloud.tencent.com/document/product/213/17278)。
2. 执行如下命令，打开`etc`文件夹下的`sysctl.conf`文件。
  ```
  vi /etc/sysctl.conf
  ```
3. 按 “i” 切换至编辑模式，将如下的 IPv6 相关参数设置为0。
	```
	#net.ipv6.conf.all.disable_ipv6 = 1
	#net.ipv6.conf.default.disable_ipv6 = 1
	#net.ipv6.conf.lo.disable_ipv6 = 1
	
	net.ipv6.conf.all.disable_ipv6 = 0
	net.ipv6.conf.default.disable_ipv6 = 0
	net.ipv6.conf.lo.disable_ipv6 = 0
	```
4. 按 “Esc”，输入`:wq`并回车，保存文件返回后，执行如下命令使配置生效。
	```
	sysctl -p
	```
	
### 步骤3：IPV6 地址配置
1. 查询实例的 IPv6 地址，您可以通过控制台查看实例分配的 IPv6 地址。
    1. 登录 [云服务器控制台](https://console.cloud.tencent.com/cvm/instance/index)。
    2. 单击实例 ID，进入实例详情页。
    3. 选择【弹性网卡】标签页。
    4. 单击弹性网卡名链接，如 eni-o8807sx7。
    5. 选择【IPv6地址管理】标签页，即可查看。

2. 手动配置 IPv6 地址。
 - Tlinux 1/2、CentOS 6/7 的操作步骤如下：
     1. 远程连接实例。具体操作，请参见 [登录及远程连接](https://cloud.tencent.com/document/product/213/17278)。
     2. 执行如下命令，打开网卡配置文件。
        ```
        vi /etc/sysconfig/network-scripts/ifcfg-eth0
        ```
`eth0`为网卡标识符，您需要修改成实际的标识符。按 “i” 切换至编辑模式，在文件中根据实际信息添加如下配置：
        - 单 IPv6 地址：
          ```
          IPV6INIT=yes
          IPV6ADDR=<IPv6地址>/<子网前缀长度>
          IPV6_DEFAULTGW=<IPv6网关>
          ```
        - 多 IPv6 地址：
          ```
          IPV6INIT=yes
          IPV6ADDR=<IPv6地址>/<子网前缀长度>
          IPV6ADDR_SECONDARIES="<IPv6地址1>/<子网前缀长度> <IPv6地址2>/<子网前缀长度>"
          IPV6_DEFAULTGW=<IPv6网关>
          ```
     3. 按 “Esc”，输入:wq并回车，保存文件返回后，重启网络服务，执行`service network restart`或`systemctl restart network`即可。
    
   - Debian 7/8/9 和 Ubuntu 14/16 的操作步骤如下：
     1. 远程连接实例。具体操作，请参见 [登录及远程连接](https://cloud.tencent.com/document/product/213/17278)。
     2. 执行如下命令，打开网卡配置文件。
        ```
        vi /etc/network/interfaces
        ```
`eth0`为网卡标识符，您需要修改成实际的标识符。按 “i” 切换至编辑模式，在文件中根据实际信息添加如下配置：
        - 单 IPv6 地址：
          ```
          auto eth0
          iface eth0 inet6 static
          address <IPv6地址>
          netmask <子网前缀长度>
          gateway <IPv6网关>
          ```
        - 多 IPv6 地址：
          ```
          auto eth0
          iface eth0 inet6 static
          address <IPv6地址>
          netmask <子网前缀长度>
          gateway <IPv6网关>
          
          auto eth0:0
          iface eth0:0 inet6 static
          address <IPv6地址1>
          netmask <子网前缀长度>
          gateway <IPv6网关>
          
          auto eth0:1
          iface eth0:1 inet6 static
          address <IPv6地址2>
          netmask <子网前缀长度>
          gateway <IPv6网关>
          ```

     3. 按 “Esc”，输入:wq并回车，保存文件返回后，重启网络服务，执行`service network restart`或`systemctl restart networking`即可。

 - Ubuntu 18 的操作步骤如下
    1. 执行如下命令，打开网卡配置文件。
         ```
         vi /etc/netplan/50-cloud-init.yaml
         ```

    2. 按 “i” 切换至编辑模式，添加 IPv6 地址和网关配置。
     ```
         network:
         version: 2
             ethernets:
                 eth0:
                     dhcp4: true
                     match:
                     macaddress: 52:54:00:75:ce:c2
                     set-name: eth0
                 addresses:
                         - 2a00:7b80:454:2000::xxx/64
                     gateway6: 2a00:7b80:454::1
     ```
>?仅添加 addresses 和 gateway6。

     3. 应用更改

        ```
        netplan apply
        ```

  - OpenSUSE 42 和 SUSE 操作步骤如下：
    **脚本方式：**
		1. 远程连接实例。具体操作，请参见 [登录及远程连接](https://cloud.tencent.com/document/product/213/17278)。
    2. 将如下脚本拷贝到 shell 文件中，这里以 `test.sh` 为例：
	```
		dev=$1
			index=$2
		ip6=$3
			prefix_len=$4

			ifcfg_file="/etc/sysconfig/network/ifcfg-$dev"

			if [ ! -f "$ifcfg_file" ]; then
				touch "$ifcfg_file"
			fi

			echo -e "\nIPADDR_$index='$ip6'\nPREFIXLEN_$index='$prefix_len'" >> "$ifcfg_file"

			# update default IPv6 routing
		netip=$(echo $ip6 | awk -F":" '{print $1":"$2":"$3":"$4}')
			echo "default $netip::1 - $ifcfg" >> /etc/sysconfig/network/routes

			service network restart
			```
		    - dev 表示网卡设备名，如 eth0、eth1。
		    - index 表示这是第几个 IPv6 地址，从0开始计数。
		    - ip6 表示本机的 IPv6 地址，如 `2607:f0d0:1002:0011:0000:0000:0000:0002`。
		    - prefix_len 表示子网前缀长度，如 64。
    3. 使用举例如下：
       ```
       ./test.sh eth0 0 2402:4e00:1000:4200:0:8f0c:d527:b985 64
       ```
			 
    **手动方式：**
    1. 远程连接实例。具体操作，请参见 [登录及远程连接](https://cloud.tencent.com/document/product/213/17278)。
    2. 执行如下命令，打开网卡配置文件。
       ```
       vi /etc/sysconfig/network/ifcfg-eth0
       ```
`eth0`为网卡标识符，您需要修改成实际的标识符。按 “i” 切换至编辑模式，在文件中根据实际信息添加以下配置：
       - 单 IPv6 地址：
         ```
         IPADDR_0=<IPv6地址>
         PREFIXLEN_0=<子网前缀长度>
         ```
       - 多 IPv6 地址：
         ```
         IPADDR_0=<IPv6地址>
         PREFIXLEN_0=<子网前缀长度>
         
         IPADDR_1=<IPv6地址1>
         PREFIXLEN_1=<子网前缀长度>
         
         IPADDR_2=<IPv6地址2>
         PREFIXLEN_2=<子网前缀长度>
         
         ```

    3. 运行`vi /etc/sysconfig/network/routes`打开路由配置文件，添加配置项：

       ```
       default <IPv6网关> - -
       ```

    4. 重启网络服务：运行`service network restart`或`systemctl restart networking`。

       

  - CoreOS 17的操作步骤如下：

    1. 远程连接实例。具体操作，请参见[使用管理终端连接Linux实例](https://cloud.tencent.com/document/product/213/17278)。

    2. 运行`vi /etc/systemd/network/eth0-*.network`打开网卡配置文件，`eth0`为网卡标识符，您需要修改成实际的标识符。在文件中根据实际信息添加以下配置：

       - 单IPv6地址：

         ```
         [Address]
         Address=<IPv6地址>/<子网前缀长度>
         [Route]
         Destination=::/0
         Gateway=<IPv6网关>
         ```

       - 多IPv6地址：

         ```
         [Address]
           Address=<IPv6地址1>/<子网前缀长度>
         [Address]
           Address=<IPv6地址2>/<子网前缀长度>
         [Route]
           Destination=::/0
         Gateway=<IPv6网关>
         ```

    3. 重启网络服务：运行`systemctl restart systemd-networkd`。      

  - FreeBSD 11的操作步骤如下：

    1. 远程连接实例。具体操作，请参见[使用管理终端连接Linux实例](https://cloud.tencent.com/document/product/213/17278)。

    2. 运行`vi /etc/rc.conf`打开网卡配置文件，`vtnet0`为网卡标识符，您需要修改成实际的标识符。在文件中根据实际信息添加以下配置：

       1. 单IPv6地址：

       ```
         ipv6_ifconfig_vtnet0="<IPv6地址>"
         ipv6_defaultrouter="<IPv6网关>"
       ```

       2. 多IPv6地址：

       ```
         ipv6_ifconfig_vtnet0="<IPv6地址1>"
         ipv6_ifconfig_vtnet0="<IPv6地址2>"
         ipv6_defaultrouter="<IPv6网关>"
       ```

         说明：为区分单个IPv6与多个IPv6地址，您只需在同一网卡标识符的基础上重复添加地址信息即可。

       3. 重启网络服务：运行`/etc/netstart restart`。

## ssh支持ipv6配置

注：如果需要使用ipv6地址 远程连接，则需要开启ssh的IPv6支持。

修改ssh的配置文件`/etc/ssh/sshd_config`，将`AddressFamily any`取消注释

重新加载配置：`service ssh re
