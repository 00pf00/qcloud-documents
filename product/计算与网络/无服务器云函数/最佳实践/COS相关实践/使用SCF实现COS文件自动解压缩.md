## 操作场景
在本文档示例中，我们用到了云函数（SCF）和对象存储（COS）。其中，COS 用来存储上传后需要解压的 .zip 压缩文件以及解压后的文件，SCF 实现对 .zip 压缩文件上传 COS 之后进行自动解压缩。

## 创建存储桶
1. 登录 [对象存储控制台](https://console.cloud.tencent.com/cos5)。
2. 在左侧导航中选择【存储桶列表】，单击【创建存储桶】，新建 COS Bucket。
3. 设置 COS Bucket 的名称，如 `mybucket`，选择地域为`广州`，设置访问权限为默认值 `私有读写`，单击【确定】即可。

## 配置解压函数
1. 选择左侧的【函数计算】，并找到 **zip 文件解压函数**配置页面。
2. 选择【添加函数】，在弹出的窗口中配置如下信息：
   - **函数名称**：函数名称作为函数的唯一标识名称，创建后不可修改。您可以在 [云函数 SCF](https://console.cloud.tencent.com/scf/list?rid=1&ns=default) 控制台上查看该函数。
   - **事件类型**：事件是指触发云函数的操作。以上传操作为例，上传的方式可能是调用 `PUT Object` 接口，也可能是调用 `POST Object` 接口，当选择事件为【Put 方法创建】时，只有通过 `PUT Object` 接口上传的压缩包会触发解压缩。
> !如果您的文件是通过简单上传、分块上传或跨地域复制等渠道上传到存储桶中，建议您选择【全部创建】事件。
 - **触发条件**：指压缩包上传到指定路径时会触发云函数。如果选择指定前缀，则仅当压缩包上传到指定前缀路径下时才会触发云函数；如果选择整个存储桶，则压缩包上传到存储桶任意位置均会触发。
> !如果配置的目标文件前缀与触发条件存在包含关系，可能导致循环触发，请尽量避免这种情况。例如目标前缀为 `prefix`，触发条件为 `pre`，当上传一个 `pref` 的压缩包时，将触发循环解压。
 - **解压格式**：指当前可支持的压缩格式，目前仅支持 ZIP 格式压缩包解压。
 - **目标存储桶**：是压缩包解压缩后，文件存储的存储桶。
 - **目标文件前缀**：是压缩包解压缩后，文件存储的具体路径。如果不设置则默认为存储桶根目录。
 - **SCF 授权**：解压缩需要授权云函数从您的存储桶中读取压缩包，并将解压缩后的文件上传到您指定的位置。因此需要添加此授权。
 ![](https://main.qcloudimg.com/raw/208829697a9772efa43648e62735b2ee.png)
3. 添加配置后，选择【确认】，即可看到函数已添加完成。选择【查看日志】，可查看解压缩的历史运行情况。当解压出现报错时，您可以通过选择【查看日志】，快速跳转到 SCF 控制台查看日志错误详情。如果需要删除不使用的文件解压缩规则，可以选择【删除】并删除相关配置。

## 测试函数功能
1. 切换至【文件列表】。
![](https://main.qcloudimg.com/raw/6949204d291d00edf678479df91a3e1f.png)
2. 单击【上传文件】，选择任意一个 .zip 压缩文件上传。
3. 刷新当前存储桶，检查是否生成解压后的文件。
4. 切换至【函数计算】查看日志或进入 [云函数控制台](https://console.cloud.tencent.com/scf/list?rid=1&ns=default) 查看执行结果，在**运行日志**中可以看到打印出来的日志信息。
