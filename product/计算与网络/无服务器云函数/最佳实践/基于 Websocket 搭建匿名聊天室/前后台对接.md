## 操作场景

本文档指导您修改聊天室的 HTML 文件，体验聊天室的前后台对接效果。

## 前提条件

- 已 [下载文字识别小工具的 HTML 文件](https://main.qcloudimg.com/raw/cdbaa170c424a2faae4d6eac2c992512.zip)。
- 已保存【函数部署】->【配置 API 网关】->【获取 websocket 连接地址】中的 API 地址。

## 操作步骤

### 修改 URL 地址

1. 使用编辑器打开已下载的 websocketclient.html 文件。
> 如果没有专业的编辑器，可以通过文本方式打开。
2. 将下图中的 url 参数修改为 websocket 连接地址，并保存。
![](https://main.qcloudimg.com/raw/e65ededbe5446d422e1e59413ff8db42.png)

### 体验效果

1. 在浏览器中打开该 websocketclient.html 文件，并保持为 2 个及以上窗口。然后前往[云函数控制台]((https://console.cloud.tencent.com/scf))，选择“ws_register”函数，切换到【运行日志】页面，查看云函数的执行结果。
![](https://main.qcloudimg.com/raw/26a1e364f5fd9ddf372861fa7ac7aa5a.png)

2. 前往数据库管理界面，查看数据库中记录的信息，已经记录了 2 个 ConnectionID。
![](https://main.qcloudimg.com/raw/af0c77a57845b8d8907f0b3a219108ad.png)

3. 回到 websocketclient 页面，在底部编辑消息“测试 Websocket”，单击底部的【Send】按钮。在另外一个窗口中查看接收到的消息，如下图所示。
![](https://main.qcloudimg.com/raw/2a27643bd307c58a974e615612f1ea6e.png)

4. 前往云函数控制台，选择“ws_transmission”函数，切换到【运行日志】页面，查看云函数的执行结果。
![](https://main.qcloudimg.com/raw/1bb434e358a263805cfed4d35f73dee0.png)

5. 回到 websocketclient 页面，并关闭其中一个页面。然后前往云函数控制台，选择“ws_delete”函数，切换到【运行日志】页面，查看云函数的执行结果。
![](https://main.qcloudimg.com/raw/8ada0522fb517c1c3d69716239fea704.png)

6. 前往数据库管理界面，刷新数据库数据，查看数据库中记录的信息，已经删除了一个 ConnectionID。
![](https://main.qcloudimg.com/raw/2aaf5739641e6b9bc743c1982d24b1df.png)