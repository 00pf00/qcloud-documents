借助Istio的service entry机制，我们可以在TCM中添加非TKE提供的集群中的服务，例如传统的VM服务、数据库服务等。通过service entry添加的服务可正常使用DestinationRule、VirtualService等网格功能进行流量管理。关于service entry的详细介绍，可查看[service entry 官方文档](https://istio.io/latest/docs/reference/config/networking/service-entry/)

##### 添加第三方服务

在【服务】页面中，点击【新建】，填写服务基本信息，即可将非容器化的第三方服务注册到网格服务中：

![](https://main.qcloudimg.com/raw/8be4a2350315f08bbd9cb3ba51fed3ae.png)

相关参数实例如下：

| 名称          | 释义                                                         | 必填 | 样例               |
| ------------- | ------------------------------------------------------------ | ---- | ------------------ |
| 名称          | 服务名，只能包含小写字母、数字及分隔符("-")，且必须以小写字母开头，数字或小写字母结尾 | 是   | mysql              |
| 命名空间      | 此服务所属的命名空间                                         | 是   |                    |
| Hosts         | 此服务的访问域名，可添加多个                                 | 是   | foo.bar.com        |
| 服务地址      | 此服务的VIP地址，支持CIDR                                    | 否   | 192.192.192.192/24 |
| Entry服务位置 | 网格内部：如果为K8S POD并且namespace开启了自动注入sidecar，将自动部署sidecar，实现异构服务的互相通信与管控；可使用特性与 k8s 服务一致；<br/>网格外部：无 Sidecar，用于管理通过 Web Api 访问的外部服务；不支持 mtls，policy enforcement操作在网格内主调服务执行 | 是   |                    |
| 注册DNS       | 开启后将自动创建相同 Host 的 selector-less TKE service，请勿手动修改对应 service；开启注册后，Hosts 地址需满足集群 Service 命名规范 | 否   |                    |
| 服务端口配置  | 服务对于的端口名称、协议、端口号信息                         | 是   |                    |
| 服务发现模式  | Static: 使用静态的 endpoint ip 地址作为服务实例<br/>DNS:通过 DNS 解析服务 endpoint ip 地址，多用于外部服务；申明的 endpoint 需使用 DNS 域名，在无 endpoint情况下将解析服务为hosts 域名<br/>NONE：当服务无需IP解析时选择 | 是   |                    |
| Endpoints     | 服务的接入点，可填写多个，但最终只会同时使用一个             | 否   |                    |

