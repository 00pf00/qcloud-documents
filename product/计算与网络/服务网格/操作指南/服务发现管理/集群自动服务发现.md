一个TCM网格支持关联多个TKE集群，并自动发现其中的K8S服务，您可以在创建网格时或在网格基本信息页中关联多个TKE集群，TCM将自动将集群中的服务展示在【服务】界面中。

### 使用限制

集群版本：TCM不强要求集群版本完全相同，但集群版本应符合对于的Istio对K8S版本的要求，详见[Istio K8S支持情况](https://istio.io/latest/docs/releases/supported-releases/)

VPC网络：对于不在同一VPC的多个集群，为确保跨集群Pod正常访问，需使用[云联网](https://cloud.tencent.com/document/product/877)联通的多个集群，请将集群添加到同一个云联网实例中。**云联网实例中各端的VPC中主机CIDR、容器 CIDR不冲突。**

容器网络：如果TKE集群使用Global route网络模式，需要[将容器网络注册至云联网](https://cloud.tencent.com/document/product/457/35087)，以便于新添加的容器CIDR可被访问。

其他限制：托管网格仅支持单个地域多集群模式.

### 添加集群

对于TKE创建的集群，您可以在创建网格或者网格基本信息页中将符合限制条件的集群选取和添加到网格中，对于非TKE创建的集群，您需要先将集群注册到TKE，注册完成后可方可加入网格，关于注册集群可查看[注册集群]()

### 服务发现

基于TKE中创建或者注册的集群创建的服务网格，TCM将自动获取到集群中所有namespace中的service，并在【服务】界面中展示。想要将服务加入到网格中进行管理，您还需要完成sidecar注入操作，TCM支持namespace级别的sidecar自动注入，操作步骤如下：

1. 创建网格时自动注入：

   ![](https://main.qcloudimg.com/raw/172fd04c62298335423596ee8d73b07e.png)

2. 已有网格，在【服务】界面中，开启自动注入：

   ![](https://main.qcloudimg.com/raw/0c13255509f3951d8405d701684990bc.png)

对于开启自动注入之前已经存在的服务，需要重启POD才能创建sidecar。您可以在服务详情页中查看sidecar运行情况：

![](https://main.qcloudimg.com/raw/daf7bee01817871f90e29aed62bc0db5.png)



