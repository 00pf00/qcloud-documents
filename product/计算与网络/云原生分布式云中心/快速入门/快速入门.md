本文将介绍如何从零开始，开通云原生分布式云中心 TDCC 服务，注册集群，创建应用并配置分发策略，实现多云多集群的应用管理。

## 步骤1：注册腾讯云账号
如果您已在腾讯云注册，可忽略此步骤。
<div style="background-color:#00A4FF; width: 170px; height: 35px; line-height:35px; text-align:center;"><a href="https://cloud.tencent.com/register?s_url=https%3A%2F%2Fcloud.tencent.com%2F" target="_blank"  style="color: white; font-size:13px;">点此注册腾讯云账号</a></div>

## 步骤2：开通云原生分布式云中心

在 [腾讯云控制台](https://console.cloud.tencent.com/) 中，选择**云产品** -> **云原生分布式云中心**，进入云原生分布式云中心控制台，按照界面提示开通云原生分布式云中心服务并为服务授权。（如果您已为该服务授权，请跳过该步骤。）
>? 云原生分布式云中心基于**容器服务**打造，在服务授权步骤将请求**容器服务**权限，请点击同意授权。
>
<div style="background-color:#00A4FF; width: 150px; height: 35px; line-height:35px; text-align:center;"><a href="https://console.cloud.tencent.com/tdcc" target="_blank"  style="color: white; font-size:13px;">点此进行服务授权</a></div>


## 步骤3：注册集群
1. 登录 [云原生分布式云中心控制台](https://console.cloud.tencent.com/tdcc)，进入**分布式基础设施** -> **集群** 页面。
2. 点击**注册集群**，在集群注册页中参考以下信息添加集群。如下图所示：
![]()
 - **集群名称**：输入自定义实例名称。该名称全局唯一，请避免与自己或他人现有实例名称重复。
 - **接入地域**：选择该集群接入的地域。**接入地域后将无法更改**，请根据集群所在地进行选择。
 - **集群标签**：为新建的实例绑定腾讯云标签，也可在实例创建后在实例详情页进行绑定与编辑。
 - **集群描述**：输入自定义集群描述信息。
3. 点击**完成**按钮完成注册集群的创建。

## 步骤4：创建命名空间

1. 登录[云原生分布式云中心控制台](https://console.cloud.tencent.com/tdcc)控制台，进入**分布式应用管理** -> **应用管理** 页面。
2. 点击左侧**命名空间**标签页进入列表页，点击**新建**按钮创建一个命名空间，例如: a100
3. 在新建 Namespace 页面的底端，需要为该资源配置分发策略，支持选择 **新建分发策略**, **指定分发策略**, **不指定分发策略**，此处选择**新建分发策略**：
 
4. 在**新建分发策略**下，点击**选择已有集群**，选择您的应用想要分发部署的集群，以本文为例选择两个集群，后台将自动为其创建分发策略。
![]()

5. 点击**创建Namespace**按钮，完成资源创建，进入命名空间列表页面，可以看到Namespace命名空间已创建成功。
![]()
 
6. 点击创建出的 Namespace 名称进入详情页面，查看该 Namespace 的基本信息，关联的分发策略和拓扑图，点击**实例管理**标签页可以看到该 Namespace 已成功部署到多个集群上。
![]()
 

## 步骤5：创建工作负载
>? 创建工作负载Workload，以及其他各种 K8s 资源与创建命名空间的流程基本一致，您可以根据需要灵活配置。
>
1. 登录[云原生分布式云中心控制台](https://console.cloud.tencent.com/tdcc)控制台，进入**分布式应用管理** -> **K8s资源** 页面。
2. 点击左侧**工作负载**->*Deployment*标签页进入列表页，点击**新建**按钮创建一个Deployment工作负载，以本文为例将创建一个 nginx 工作负载。
 ![]()
3. 在新建Workload页面的底端，需要为该资源配置分发策略，可以选择**新建分发策略**, **已有分发策略**, **不关联分发策略**，此处选择**已有分发策略**：
 
4. 点击下拉菜单，选择上一步创建出的分发策略。
 ![]()

5. 点击**创建Workload**按钮，完成资源创建，进入工作负载列表页面，可以看到该工作负载已创建成功。
 ![]()
 
6. 点击创建出的 Deployment 名称进入详情页面，查看该 Deployment 的基本信息，关联的分发策略和拓扑图，点击**实例管理**标签页可以看到该 Deployment 已成功部署到多个集群上。
 ![]()

## 步骤6：模拟灰度发布
>? nginx应用已成功发布至demo-cls-dev和demo-cls-test两个集群上，单独升级demo-cls-dev集群上的nginx版本，模拟灰度发布行为
>
1. 登录[云原生分布式云中心控制台](https://console.cloud.tencent.com/tdcc)控制台，进入**分布式应用管理** -> **K8s资源** 页面。
2. 点击创建出的 nginx 工作负载进入详情页面，点击进入**实例管理**标签页，查看 nginx 工作负载已成功部署。
 ![]()
3. 选择在 demo-cls-dev 集群上实例，点击**新建差异化策略**，在弹出的对话框中配置差异化策略，以本文为例升级该实例的镜像版本为 nginx:1.14.2 。更多差异化策略信息参见：[差异化策略]()

 ![]()

5. 点击**完成**按钮完成差异化策略配置，查看实例列表页面，可以看到该差异化策略已创建成功。
 ![]()
 
6. 点击进入指定集群下工作负载列表，查看 nginx 工作负载的基本信息，可以看到镜像版本已升级至 nginx:1.14.2 
 ![]()