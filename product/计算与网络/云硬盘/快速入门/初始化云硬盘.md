## 操作场景
本文档介绍如何初始化已挂载至云服务器的空云硬盘，在云硬盘上创建文件系统并向其中写入一个名为 `qcloud.txt` 的文件。
>?关于初始化云硬盘的更多信息，请参考 [初始化场景介绍](https://cloud.tencent.com/document/product/362/33065)。
>

## 注意事项
您可先了解 [云硬盘使用注意事项](https://cloud.tencent.com/document/product/362/17819#.E4.BA.91.E7.A1.AC.E7.9B.98.E4.BD.BF.E7.94.A8.E4.B8.8A.E6.9C.89.E4.BB.80.E4.B9.88.E6.B3.A8.E6.84.8F.E4.BA.8B.E9.A1.B9.EF.BC.9F) 后再对云硬盘进行相关操作，以免损坏重要数据。

## 前提条件
已将云硬盘 `cbs-test` 挂载至云服务器，详情请参见 [步骤2：挂载云硬盘](https://cloud.tencent.com/document/product/362/32402)。

## 操作步骤
<dx-tabs>
::: 格式化、创建文件系统并写入文件（Windows）
>?本文使用的 Windows 云服务器操作系统以 Windows Server 2012 R2 数据中心版 64位中文版为例，不同版本操作系统步骤有一定区别，请您结合实际情况进行操作。
>
1. 以管理员身份登录 Windows 云服务器，详情请参见 [使用 RDP 登录 Windows 实例（推荐）](https://cloud.tencent.com/document/product/213/5435)。 
2. 在云服务器桌面，右键单击左下角的 <img src="https://main.qcloudimg.com/raw/3d815ac1c196b47b2eea7c3a516c3d88.png" style="margin:-6px 0px">。
3. 在弹出的菜单中，选择【磁盘管理】打开“磁盘管理”窗口。
4. （可选）右键单击目标空磁盘，选择【联机】。
当磁盘状态变为“没有初始化”时，表示联机完成。
5. （可选）右键单击已联机的磁盘，选择【初始化磁盘】，在弹出的“初始化磁盘”窗口中，选择【MBR（主启动记录）】，并单击【确定】。
>?
>- MBR（Main Boot Record）格式分区支持的磁盘最大容量为2TB，GPT（GUID Partition Table）分区表最大支持的磁盘>容量为18EB。如果您需要使用大于2TB的磁盘容量，请采用 GPT 分区方式。
>- 若磁盘投入使用后，再切换磁盘分区形式，则磁盘上的原有数据将会被清除，因此请在磁盘初始化时谨慎选择磁盘分区形>式。
>
6. 右键单击目标磁盘，选择【新建简单卷】，并在弹出的“新建简单卷”窗口中单击【下一步】。
7. 输入简单卷大小，单击【下一步】。
8. 选择驱动器号或驱动器路径，单击【下一步】，本文以分配驱动器号 E 为例。如下图所示：
![](https://main.qcloudimg.com/raw/1f61b5dcd5c965fa3e3bc11983475d38.png)
9. 选择文件系统及格式化分区，单击【下一步】。
![](https://main.qcloudimg.com/raw/608ffc67e52b53691bf64f2b2411b948.png)
10. 单击【完成】。
 目标磁盘显示正在格式化，需要等待片刻让系统完成初始化操作。当卷状态为“状态良好”时，表示初始化磁盘成功。初始化成功后，在【计算机】界面可以看到新分区的数据盘。
11. 进入新分区的数据盘，新建文件 `qcloud.txt`，输入您需要的内容，选择【文件】>【保存】。
:::
::: 格式化、创建文件系统并写入文件（Linux）
>!
>- 本文使用的 Linux 云服务器操作系统以 CentOS 7.8 为例，不同版本操作系统步骤有一定区别，请您结合实际情况进行操作。
>- 本文以使用 EXT4 文件系统为例。
>- Linux 云服务器重启或开机后，不会自动挂载数据盘。
>
1. 以 root 用户登录 Linux 云服务器，详情请参见 [使用标准登录方式登录 Linux 实例（推荐）](https://cloud.tencent.com/document/product/213/5436)。
2. 执行以下命令，查看连接到实例的磁盘名称。
 ```
fdisk -l
``` 回显信息如下图所示，则表示当前的云服务器有两块磁盘，`/dev/vda` 是系统盘，`/dev/vdb` 是新增数据盘。
本文连接到实例的磁盘名称以 `/dev/vdb` 为例。如下图所示：
![](https://main.qcloudimg.com/raw/969d3ca3d95b16d47103886e11714868.png)
3. 执行以下命令，格式化该磁盘。
```
mkfs.ext4 /dev/vdb
```
4. 执行以下命令，将该磁盘挂载到 `/data` 挂载点。
```
mount /dev/vdb /data
```
5. 依次执行以下命令，进入该磁盘，并新建文件 `qcloud.txt`。
```
cd /data
``` ```
vi qcloud.txt
```
6. 按 **i** 进入编辑模式，可输入 “This is my first test.”。
7. 按 **Esc** 退出编辑模式，输入 **:wq** 后，按 **Enter** 保存并退出文件。
8. 执行 `ls` 命令，可查看到 `qcloud.txt` 文件已写入盘中。
9. 您可通过以下步骤，设置磁盘开机自动挂载。
>? 若无需设置开机自动挂载磁盘，则跳过后续步骤。
>
您可以根据业务需求选择使用弹性云硬盘的软链接、文件系统的 UUID（universally unique identifier）或设备名称自动挂载磁盘，相关说明和信息获取方式如下：
<table>
 <tr>
      <th>挂载方式</th>
      <th>优缺点</th>
      <th>信息获取方式</th>
 </tr>
 <tr>
     <td nowrap="nowrap">使用弹性云硬盘的软链接<b>（推荐）</b></td>
     <td><b>优点</b>：每个弹性云硬盘的软链接固定且唯一，不会随卸载挂载、格式化分区等操作而改变。</br><b>缺点</b>：只有弹性云硬盘才有软链接。无法感知分区的格式化操作。</td>
		 <td nowrap="nowrap">执行以下命令，查看弹性云硬盘的软链接。</br><pre><font color="white">ls -l /dev/disk/by-id</font></pre></td>
	</tr>
	<tr>
	   <td nowrap="nowrap">使用文件系统的 UUID</td>
		 <td>可能会因文件系统的 UUID 变化而导致自动挂载设置失效。</br>例如，重新格式化文件系统后，文件系统的 UUID 将会发生变化。</td>
		 <td nowrap="nowrap">执行以下命令，查看文件系统的 UUID。</br><pre><font color="white">blkid /dev/vdb</font></pre></td>
  </tr>
	<tr>
	   <td nowrap="nowrap">使用设备名称</td>     
		 <td>可能会因设备名称变化而导致自动挂载设置失效。</br>例如，迁移数据时将云服务器上的弹性云硬盘卸载后再次挂载，操作系统再次识别到该文件系统时，名称可能会变化。</td>
		 <td nowrap="nowrap">执行以下命令，查看设备名称。</br><pre><font color="white">fdisk -l</font></pre></td>
 </tr>
</table>
8. 执行以下命令，备份 `/etc/fstab`  文件。以备份到  /home 目录下为例：
```
cp -r /etc/fstab /home
```
9. 执行以下命令，使用 VI 编辑器打开 `/etc/fstab` 文件。
```
vi /etc/fstab
```
10. 按 **i**，进入编辑模式。
11. 将光标移至文件末尾，按 **Enter**，添加如下内容。
```
<设备信息> <挂载点> <文件系统格式> <文件系统安装选项> <文件系统转储频率> <启动时的文件系统检查顺序>
```
 - **（推荐）**以使用弹性云硬盘的软链接自动挂载为例，结合前文示例则添加：
```
/dev/disk/by-id/virtio-disk-drkhklpe /data ext4 defaults 0 0
```
 - 以使用磁盘分区的 UUID 自动挂载为例，结合前文示例则添加：
```
UUID=d489ca1c-5057-4536-81cb-ceb2847f9954 /data  ext4 defaults     0   0
```
 - 以使用设备名称自动挂载为例，结合前文示例则添加：
```
/dev/vdb /data   ext4 defaults     0   0
```
12. 按 **Esc**，输入 **:wq**，按 **Enter**。
保存设置并退出编辑器。
13. 执行以下命令，检查 **/etc/fstab** 文件是否写入成功。
```
mount -a 
``` 如果运行通过则说明文件写入成功，新建的文件系统会在操作系统启动时自动挂载。
:::

</dx-tabs>

## 下一步操作
云硬盘是云上可扩展的存储设备，您可根据业务需求随时扩展其容量，同时不失去云硬盘上原有数据。具体操作请参见 [步骤4：扩容云硬盘](https://cloud.tencent.com/document/product/362/54728)。

