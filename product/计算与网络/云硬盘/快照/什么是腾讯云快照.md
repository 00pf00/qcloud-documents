## 功能简介
- 在线数据的实时副本
快照是对云硬盘的完全可用拷贝。在该盘在出现问题时，可以快速恢复到未出问题前的状态。重大变更前对云硬盘做快照，若变更失败可用于恢复数据。
- 关键里程碑的持久备份
快照可以作为业务数据的持久备份，保留业务数据的里程碑状态。
- 快速部署业务
您可使用业务的快照文件快速克隆多块云硬盘，达到快速部署服务器的目的。

## 应用场景
快照是一种便捷高效的数据保护服务，推荐应用于以下业务场景中：
- 数据日常备份
您可以利用快照定期备份重要业务数据，以应对误操作、攻击或病毒等导致的数据丢失风险。
- 数据快速恢复
更换操作系统、升级应用软件或迁移业务数据等重大操作前，您可以创建一份或多份数据快照。一旦操作过程中出现任何问题，可以通过数据快照及时将业务恢复到正常的系统数据状态。
- 生产数据的多副本应用
您可以通过创建生产数据快照，为数据挖掘、报表查询、开发测试等应用提供近实时的真实生产数据。
- 快速部署环境
您可以对云服务器创建快照，使用系统快照创建自定义镜像，再使用自定义镜像创建实例，以便快速批量地部署相同环境的云服务器，节省重复配置的时间。

## 计费规则
关于快照计费的详细信息，请参考 [快照计费概述](https://docs.qq.com/doc/DRm9VcFhaQXJHek5h) 和 [快照价格总览](https://cloud.tencent.com/document/product/362/2413)。

## 配额限制
关于快照配额限制的详细信息，请参考 [使用限制](https://docs.qq.com/doc/DRnRRVHJhVnNGRlJJ)。

## 快照类型
- 手动快照
手动将某个时间点的云硬盘数据备份成快照，用来快速创建更多相同数据的云硬盘或者在未来将云硬盘恢复到该时间点的状态，具体操作请参考 [创建快照](https://docs.qq.com/doc/DRmdnVkRSaGliTHlr)。
- 定期快照
当您的业务持续更新时，可以使用定期快照来提供连续的备份。只需制定一个备份策略并关联云硬盘，即可实现在一定周期内对云硬盘数据进行持续备份，大幅提高数据安全，具体操作请参考 [定期快照](https://docs.qq.com/doc/DRlRhVnNMQVZ1WllR?opendocxfrom=admin)。

>?在创建快照过程中，存在一部分应用数据保存在内存中未持久化存储的情况，导致快照未能捕获最新最完整的云硬盘数据。建议您参考 [注意事项](https://docs.qq.com/doc/DRmdnVkRSaGliTHlr) 了解如何保证快照数据的一致性。


## 快照与镜像的差异
<table>
		<tr>
		<th>名称</th>
		<td><a href="https://cloud.tencent.com/document/product/213/4940">镜像</a></td>
		<td>快照</td>
		</tr>
		<tr>
		<th>性质</th>
		<td>云服务器软件配置（操作系统、预安装程序等）的模版</td>
		<td>某一时间点对云硬盘的数据备份</td>
		</tr>
		<tr>
		<th>应用场景</th>
		<td>
			<ul>
				<li>备份短期不会更改的系统</li>
				<li>批量部署应用</li>
				<li>系统诉数据迁移</li>
			</ul>
		</td>
		<td>
			<ul>
				<li>定期备份重要业务数据</li>
				<li>重大操作前备份数据</li>
				<li>云硬盘数据迁移</li>
			</ul>
		</td>
		</tr>
</table>

镜像的底层数据存储使用云硬盘快照服务，意味着**创建镜像时系统会自动生成一个关联的快照**。系统盘与数据盘均可以创建快照，但只有系统盘快照可以创建自定义镜像，从而使用自定义镜像创建子机实例。
若一个实例上没有挂载数据盘，所有数据全部写在系统盘上，如果想对这块系统盘进行数据保护，并不意味着只需要做镜像不需要做快照。事实上，由于镜像没有定期功能，遇到系统被破坏的情况时，可能只能恢复到历史上很久之前的数据，无法起到数据保护的功能。

### 注意事项
- 镜像与其关联的快照是一种绑定关系，需要先 [删除镜像](https://cloud.tencent.com/document/product/213/6036) 才能删除其关联的快照。您可在镜像详情中查看自定义镜像关联的快照信息。
- 使用共享镜像时，只需镜像的创建方腾讯云账户支付关联快照的费用，被共享方无需支付。
- 自定义镜像产生的关联快照按快照实际容量收费，您可在快照概览中查看快照总容量。
- 腾讯云账户欠费会导致创建自定义镜像失败，创建镜像前请保证您的腾讯云账户有足够的余额。

## 云硬盘快照对比传统存储快照的优势
与传统存储快照相比，云硬盘快照在总成本、使用额度和可扩展性上具有优势。如下表：
<table>
	<tr>
	  <th>名称</th>
		<td>云硬盘快照</td>
		<td>传统存储快照</td>
	</tr>
	<tr>
		<th>总成本</th>
		<td>按照实际产生的快照容量付费，性价比较高。</td>
		<td>前期成本高。包括软件许可、预留空间及升级维护费用，浪费较大。</td>	
	</tr>
	<tr>
		<th>额度</th>
		<td>无限制，可满足大规模业务规模数据保护需求。</td>
		<td>受限于初次购买的存储设备容量。</td>
	</tr>
	<tr>
		<th>可扩展性</th>
		<td>是腾讯云提供的弹性服务，可根据业务需要进行快速扩展</td>
		<td>扩展性较低，受限于生产存储性能、可用容量和供应商支持能力等。</td>
	</tr>
</table>


- 传统存储快照的前期成本较高，包括软件许可、预留空间和升级维护费用，浪费较大。而云硬盘快照按量计费，仅需为实际产生的快照容量付费，性价比较高。
- 传统存储快照的额度受限于初次购买的存储设备容量，而云硬盘快照可以提供无限容量的快照额度，可以满足超大业务规模数据保护需求。

## 案例回顾
#### 案例一：执行高危操作前未做手动快照，导致数据丢失
客户A从未对云硬盘制作过快照。
2019年5月某日，由于操作人员对云硬盘进行了fio测试，文件系统被损坏，数据无法找回。
若客户A在进行测试前先对云硬盘做一份快照，那么在数据损坏后可以迅速启用快照回滚，及时恢复业务。

#### 案例二：重要数据盘未做定期快照，导致数据丢失
客户B曾对多块云硬盘制作了快照，但2019年1月以后，出于成本考虑没有对新购云硬盘制作快照。
2019年6月某日，未受快照保护的一块云硬盘由于文件系统层数据被误删除，数据丢失无法找回。
若客户B对该云硬盘进行了定期快照保护，那么在数据被误删后可以恢复至上一次快照时间点的数据状态，减少损失。在事件发生后，客户B主动为该云硬盘创建快照，并全面增强了快照保护。

#### 案例三：误操作后利用定期快照回滚，业务得以恢复
客户C对所有云硬盘都进行了快照保护。
2019年5月某日，由于误操作导致开机异常，客户C及时使用2天前的定期快照恢复数据，业务没有受损。


从整体来看，在多数因操作失误而导致数据丢失的案例中：
- 服务器和云硬盘在**未创建快照**的情况下，出现问题时数据找回非常困难，易造成较大损失。
- 服务器和云硬盘在**已创建快照**的情况下，出现问题时数据基本找回，损失较小。

建议您可针对不同种类的业务创建快照，做到低成本高容灾。







