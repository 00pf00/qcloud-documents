当您首次使用腾讯云容器服务（Tencnet Kubernetes Engines，TKE）时，需进行服务授权以获取相关云资源使用权限。本文档介绍服务授权中默认角色已关联的策略及其授权范围等相关信息。

## TKE_QCSRole 角色<span id="TKE_QCSRole"></span>

`TKE_QCSRole` 角色为容器服务角色，被授予该角色的权限后，可在已关联策略的权限范围内访问您的其他云服务资源。

### 授权场景
当已注册并登录腾讯云账号后，首次登录 [容器服务控制台](https://console.cloud.tencent.com/tke2) 开始使用时，需前往“访问管理”页面对当前账号授予腾讯云容器服务操作 CVM/CLB/CBS 等云资源的权限。



### 授权策略说明

- TKE_QCSRole 角色包含以下四种已授权策略 ：
    - `QcloudAccessForTKERole`：容器服务对云资源的访问权限。
    - `QcloudAccessForTKERoleInCreatingCFSStorageclass`：容器服务操作权限。例如，增删查文件存储（CFS）文件系统、查询文件系统挂载点等。
    - `QcloudCVMFinanceAccess`：云服务器（CVM）财务权限。
    - `QcloudAccessForTKERoleInOpsManagement`：运维管理。
- 被授予 TKE_QCSRole 角色权限之后，账号将自动继承该角色下已关联策略的后续变更。

### 授权步骤
1. 登录[ 容器服务控制台 ](https://console.cloud.tencent.com/tke2)，选择左侧导航栏中的【集群】，弹出【服务授权】窗口。如下图所示：
![](https://main.qcloudimg.com/raw/6add633cf0b6523ebaf52cbd8323b71e.png)
2. 单击【前往访问管理】，进入角色管理页面，如下所示：
![](https://main.qcloudimg.com/raw/0e2eefb5fb1f9954e1131adc75444d10.png)
3. 单击【同意授权】，完成身份验证后即可成功授权。

### 权限内容

 TKE_QCSRole 包含的主要权限信息如下：
- 查询云服务器（CVM）及云服务器财务权限。
- 增删查负载均衡（CLB）实例、增删监听器、绑定或解绑监听器规则等。
- 增删查云硬盘（CBS）实例、解绑或解挂云硬盘。
- 给负载均衡资源创建标签（Tag）及使用标签查询负载均衡实例信息。
- 增删查文件存储（CFS）文件系统及查询文件系统挂载点等。
- 日志服务（CLS）的管理日志集及日志主题、检索日志、拉取日志集及日志主题、心跳和拉取配置等。

#### 云服务器 CVM 相关权限

| 权限名称 | 权限说明 |
| -------- | -------- |
| `cvm:DescribeInstances` | 查询服务器实例列表 |
| `cvm:finance:*` | 云服务器财务权限 |
| `cvm:Cbs` | |

####  负载均衡 CLB 相关权限

| 权限名称 | 权限说明 |
| -------- | -------- |
| `clb:*` | 负载均衡相关所有功能 |


####  日志服务 CLS 相关权限

| 权限名称 | 权限说明 |
| -------- | -------- |
| `cls:listTopic` | 列出指定日志集下的日志主题列表 |
| `cls:getTopic` | 查看日志主题信息 |
| `cls:createTopic` | 创建日志主题 |
| `cls:modifyTopic` | 修改日志主题 |
| `cls:deleteTopic` | 删除日志主题 |
| `cls:listLogset` |  列出日志集列表 |
| `cls:getLogset` | 查看日志集信息 |
| `cls:createLogset` | 创建日志集 |
| `cls:modifyLogset` | 修改日志集 |
| `cls:deleteLogset` | 删除日志集 |
| `cls:listMachineGroup` | 列出机器组列表 |
| `cls:getMachineGroup` | 查看机器组信息 |
| `cls:createMachineGroup` | 创建机器组 |
| `cls:modifyMachineGroup` | 修改机器组 |
| `cls:deleteMachineGroup` | 删除机器组 |
| `cls:getMachineStatus` | 查看机器组状态 |
| `cls:pushLog` | 上传日志 |
| `cls:searchLog` | 查询日志 |
| `cls:downloadLog` | 下载日志 |
| `cls:getCursor` | 根据时间获取游标 |
| `cls:getIndex` | 查看索引 |
| `cls:modifyIndex` | 修改索引 |
| `cls:agentHeartBeat` | 心跳 |
| `cls:getConfig` | 获取推流器配置信息 |

##### 文件存储 CFS 相关权限

| 权限名称 | 权限说明 |
| -------- | -------- |
| cfs:CreateCfsFileSystem | 创建文件系统 |
| cfs:DescribeCfsFileSystems | 查询文件系统 |
| cfs:DescribeMountTargets | 查询文件系统挂载点 |
| cfs:DeleteCfsFileSystem | 删除文件系统 |

#####  标签 TAG 相关权限

| 权限名称 | 权限说明 |
| -------- | -------- |
| `tag:*` |`标签相关所有功能`|

#####  容器服务 TKE 相关权限
| 权限名称 | 权限说明 |
| -------- | -------- |
| `ccs:DescribeCluster` | 查询集群列表 |
| `ccs:DescribeClusterInstances` | 查询集群节点信息 |

## IPAMDofTKE_QCSRole 角色

IPAMDofTKE_QCSRole 角色为容器服务的 IPAMD 支持服务角色，被授予该角色的权限后，可在已关联策略的权限范围内访问您的其他云服务资源。

### 授权场景

完成 [TKE_QCSRole](#TKE_QCSRole) 角色授权操作，在首次使用 VPC-CNI 网络模式创建集群时，需要首先进行相关服务授权。


### 授权策略说明

- IPAMDofTKE_QCSRole 角色包含以下三种已授权策略 ：
    - `QcloudAccessForIPAMDofTKERole`：容器服务 IPAMD 支持（TKE IPAMD）对云资源的访问权限。
    - `QcloudAccessForIPAMDRoleInQcloudAllocateEIP`：容器服务 IPAMD 操作权限。例如，增删改查弹性公网 IP。
- 被授予 IPAMDofTKE_QCSRole 角色权限之后，账号将自动继承该角色下已关联策略的后续变更。

### 授权步骤

1. 登录 [容器服务控制台](https://console.cloud.tencent.com/tke2)，单击左侧导航栏中【集群】。
2. 在“集群管理”页面中，单击集群列表上方的【新建】或【使用模板新建】。
3. 在“创建集群”页面的设置“集群信息”步骤，选择“容器网络插件”中的【VPC-CNI】时，单击【服务授权】。如下图所示：
![](https://main.qcloudimg.com/raw/fe0bb57b87e5de77998899f73afeb65d.png)
4. 在弹出的“服务授权”窗口中，单击【前往访问管理】。如下图所示： 
![](https://main.qcloudimg.com/raw/a3486f649216f9f1943765d99dfb77dd.png)
5. 在“角色管理”页面中，单击【同意授权】并完成身份验证即可成功授权。如下图所示：
![](https://main.qcloudimg.com/raw/799a750677a1e4c59ac553a3edb1fc0d.png)


###  权限内容
默认角色 IPAMDofTKE_QCSRole 包含的主要权限信息如下：

####  云服务器 CVM 相关权限
| 权限名称 | 权限说明 |
| -------- | -------- |
| `cvm:ModifyAddressesBandwidth`  | 调整弹性公网 IP 带宽 |
| `cvm:AllocateAddresses`  | 创建弹性公网 IP |
| `cvm:AssociateAddress` | 绑定弹性公网 IP |
| `cvm:DescribeAddressQuota` | 查询弹性公网 IP 配额 |
| `cvm:DescribeAddresses` | 查询弹性公网 IP 列表 |
| `cvm:DisassociateAddress` | 解绑定弹性公网 IP |
| `cvm:ModifyAddressAttribute` | 修改弹性公网 IP 属性 |
| `cvm:ReleaseAddresses` | 释放弹性公网 IP |
| `cvm:TransformAddress` | 普通 IP 转弹性 IP |

####  标签 TAG 相关权限
| 权限名称 | 权限说明 |
| -------- | -------- |
|  `tag:GetResourcesByTags` | 通过标签查询资源列表 |
|  `tag:ModifyResourceTags` | 批量修改资源关联的标签 |
|  `tag:GetResourceTagsByResourceIds` | 查看资源关联的标签 |

####  私有网络 VPC 相关权限
| 权限名称 | 权限说明 |
| -------- | -------- |
|  `vpc:DescribeSubnet` | 查询子网列表 |
|  `vpc:CreateNetworkInterface` | 创建弹性网卡 |
|  `vpc:DescribeNetworkInterfaces` | 查询弹性网卡列表 |
|  `vpc:AttachNetworkInterfac`e | 弹性网卡绑定云服务器 |
|  `vpc:DetachNetworkInterface` | 弹性网卡解绑云服务器 |
|  `vpc:DeleteNetworkInterface` | 删除弹性网卡 |
|  `vpc:AssignPrivateIpAddresses` | 弹性网卡申请内网 IP |
|  `vpc:UnassignPrivateIpAddresses` | 弹性网卡退还内网 IP |
|  `vpc:MigratePrivateIpAddress` | 弹性网卡内网 IP 迁移 |
|  `vpc:DescribeSubnetEx` | 查询子网列表 |
|  `vpc:DescribeVpcEx` | 查询对等连接 |
