## 操作场景
腾讯云容器镜像服务（Tencent Container Registry，TCR）企业版支持对托管的容器镜像进行安全扫描，生成扫描报告，暴露容器镜像内潜在的安全漏洞，并提供修复建议。容器镜像安全是云原生应用交付安全的重要一环，对上传的容器镜像进行及时安全扫描，并基于扫描结果选择阻断应用部署，可有效降低生产环境漏洞风险。

镜像安全扫描功能内置在镜像仓库中，用户可在上传容器镜像后，主动触发对指定版本的容器镜像进行安全扫描，也可以在命名空间层级配置自动扫描，该命名空间内新推送镜像上传完成后将自动被扫描。当前镜像安全扫描服务基于开源 Clair 方案，相关漏洞信息来自官方 CVE 漏洞库，并定期保持同步。即将支持自研镜像安全扫描服务，同时支持漏洞扫描，代码扫描及配置扫描，并支持基于扫描结果的镜像拉取阻断。

## 前提条件

在创建并管理 TCR 企业版实例的镜像仓库前，您需要完成以下准备工作：
- 已成功 [创建企业版实例](https://cloud.tencent.com/document/product/1141/40716)。
- 如果使用子账号进行操作，请参考 [企业版授权方案示例](https://cloud.tencent.com/document/product/1141/41417) 提前为子账号授予对应实例的操作权限。

## 操作步骤
### 配置扫描策略
新建命名空间默认配置为手动进行安全扫描，可进入命名空间详情页，修改安全扫描配置为自动扫描。
![](https://main.qcloudimg.com/raw/d2ae4e78d88c0a1ec3048562cd2a3bed.png)

### 手动触发扫描
1. 准备容器镜像
请参考 [镜像仓库基本操作](https://cloud.tencent.com/document/product/1141/41811) 上传容器镜像，并在对应镜像仓库的版本管理页查看该镜像。

2. 触发镜像扫描
选择该镜像仓库内指定镜像版本，点击【扫描】触发镜像扫描，此时安全级别显示为“扫描中”。
![](https://main.qcloudimg.com/raw/f120b213fd45827d5b2d92fc9f03a135.png)
3. 查看扫描结果
安全扫描完成后，安全级别处将自动展示当前镜像内漏洞的最高等级及个数，可点击查看漏洞详情。查看镜像的漏洞详情时，可点击指定的漏洞编号，跳转至该漏洞的详细说明，评估漏洞对业务的实际影响范围。
![](https://main.qcloudimg.com/raw/3eb32f5231cd5c1e90bd828946ccb0b6.png)
![](https://main.qcloudimg.com/raw/9fe7f3e79450b0d9b3dafd97258c8a4b.png)
4. 重新触发扫描
因漏洞库会定时更新，您可再次点击【扫描】重新触发指定镜像的安全扫描，获取最新的扫描结果。
