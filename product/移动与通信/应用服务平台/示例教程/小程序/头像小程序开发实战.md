

本项目为云开发-头像合成小程序，可以用于在小程序端生成包含不同边框的头像。


## 准备工作

1. [注册腾讯云](https://cloud.tencent.com/document/product/378/17985)。
2. 开通小程序云开发的小程序，详情请参见 [小程序端快速入门](https://cloud.tencent.com/document/product/876/41805)。
3. 开通 [数据万象](https://console.cloud.tencent.com/ci)。


## 步骤1：克隆本项目到本地并导入

将 [云开发-头像小程序](https://github.com/TencentCloudBase/Cloudbase-Examples/tree/master/miniprogram/tcb-demo-avatar) Demo 克隆到本地，并使用你自己的小程序账号导入项目。


## 步骤2：创建存储桶

1. 登录 [数据万象控制台](https://console.cloud.tencent.com/ci/bucket)。
2. 单击【绑定存储桶】，配置如下选项：
 - 新增方式：选择【新建】。
 - 存储桶名称：此处我们选择以 avatar 为例。仅支持小写字母、数字和 - 的组合，不能超过50字符。
 - 所属地区：选择存储桶开通的地域。
 - 访问权限：
 - CDN加速：
3. 单击【确定】即可创建存储桶。


## 步骤3：配置云函数


接下来，我们来配置云函数。在项目根目录中的 `cloudfunctions/image` 目录下的 config.js 中存放着需要配置的几个项目，具体如下：

```
module.exports = {
  COS_SECRETID: "", // COS 的 Secret ID ,从 https://console.cloud.tencent.com/capi 获取
  COS_SECRETKEY: "", //  COS 的 Secret Key， 从 https://console.cloud.tencent.com/capi 获取
  DOMAIN: "", // 数据万象的域名 ，从 Bucket 详情页面获取
  BUCKET: "", // Bucket 名称 ，你自己创建的 Bucket ，可以在 https://console.cloud.tencent.com/ci/bucket 找到
  REGION: "", // 节点名，例如 ap-shanghai 、ap-guangzhou、ap-chengdu
};
```


## 步骤4：部署云函数


配置完成后， 你需要上传，并部署云函数（选择云端安装依赖）。

![](https://main.qcloudimg.com/raw/d5c8b09e0559902e04e0f13e322882a6.png)


## 步骤5：查看效果


![](https://main.qcloudimg.com/raw/5a9b18a96630aa9c61de978b4b880455.gif)


## 常见问题

#### 如何替换风格或新增风格？

做好相应的边框，上传到数据万象的根目录，以headX.png来命名，其中 X 为 1，2，3，4 等数字。






