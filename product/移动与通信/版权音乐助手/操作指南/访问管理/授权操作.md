

## 1. 配置默认策略说明（只读/全读写策略）

### 步骤1：创建子账号

1. 登录 [访问管理控制台](https://console.cloud.tencent.com/cam/overview)。
2. 单击右侧菜单栏【访问管理】，单击【用户列表】页面按钮【新建用户】：
3. 单击【快速创建】按照要求填写用户相关信息，即可创建用户。
4. 回到【用户列表】，单击已创建的子账号，选择【安全】栏目的重置密码，登录子账号时，必须要有登录密码。
5. 您可以根据自身喜好，选择密码的重置方式，【保留现有密码】指当下的秘密不做修改，继续使用，【自动生成的密码】指由系统为您配置密码，您只需复制粘贴即可使用，【自定义密码】指根据您的使用习惯，设置您想要的登录密码。



### 步骤2：对子账号授予权限

对子账号授予权限可通过 CAM，对子账号（用户）进行策略配置。

1. 在【用户列表】，单击已创建的子账号，进行授权。
2. 根据自身所需关联相关策略，设置子账号资源级授权的接口全读写/只读权限。
3. 子账号设置全读写/只读策略
单击【添加策略】，选择【从策略列表中选取策略关联】，在搜索框中搜索
QcloudAMEFullAccess（全读写访问权限）/QcloudAMEReadOnlyAccess（只读访问权限）
4. 单击【下一步】并【确认】即关联策略成功。



### 步骤3：子账号访问正版曲库资源

 使用子账号登录 [正版曲库控制台](https://console.cloud.tencent.com/ame) ，需选择对应的主账号。

## 2. 配置自定义策略说明

### 2.1 使用策略语法配置

2.1.1 操作步骤：

1. 单击【添加策略】，跳转到【从策略列表中选取策略关联】选择【新建自定义策略】。
2. 选择【按策略语法创建】，默认【空白模板】直接跳转下一步。
3. 根据自身需求，可自定义修改【策略名称】及【描述】，策略内容根据场景需求，输入相应的策略语法，然后单击【完成】，即可完成自定义策略新建。具体可参考2.1.2策略语法编写示例。
4. 选择策略，单击【关联用户/组】，将策略关联到相关的子账户，单击【确定】后策略即可关联到子账户。



2.1.2 策略语法示例：

2.1.2.1 基于资源ID，分配指定资源的读写权限。

1. 配置部分域名（资源）只读权限。
示例：为子用户分配， host1、host2资源的只读权限。
```
{
	"version": "2.0",
	"statement": [{
		"effect": "allow",
		"action": [
			"name/ame:DescribeCdnHosts"
		],
		"resource": [
			"qcs::ame::uin/${Uin}:host/${host1}",
			"qcs::ame::uin/${Uin}:host/${host2}"
		],
		"condition": []
	}]
}
```
2. 配置部分域名（资源）部分读写权限。
示例：为子用户分配，host1资源的删除操作权限。
```
{
	"version": "2.0",
	"statement": [{
		"effect": "allow",
		"resource": [
			"qcs::ame::uin/${Uin}:host/${host1}"
		],
		"action": [
			"name/ame:DeleteCdnHost"
		]
	}]
}
```
 

2.1.2.2 基于标签，分配指定资源的读写权限。

1. 部分标签域名（资源）只读权限。
示例：为子用户分配，标签为"testkey&value2"资源的 只读权限。
```
{
	"version": "2.0",
	"statement": [{
		"effect": "allow",
		"action": [
			"name/ame:DescribeCdnHosts"
		],
		"resource": [
			"*"
		],
		"condition": {
			"for_any_value:string_equal": {
				"qcs:tag": [
					"testkey&value2"
				]
			}
		}
	}]
}
```
2. 部分标签域名（资源）部分读写权限。
示例：为子用户分配，标签为“testkey&value2”资源的 删除权限。
```
{
	"version": "2.0",
	"statement": [{
		"effect": "allow",
		"action": [
			"name/ame:DeleteCdnHost"
		],
		"resource": [
			"*"
		],
		"condition": {
			"for_any_value:string_equal": {
				"qcs:tag": [
					"testkey&value2"
				]
			}
		}
	}]
}
```

2.2 使用策略生成器配置：

根据场景需求，在【支持资源级授权的接口列表】中选择相对应的策略，例如：ModifyBandWidth的设定，【按策略生成器创建】进行关联。

1. 新建自定义策略，选择【按策略生成器创建】。
2. 服务选择【正版曲库直通车】，操作搜索选择自身所需的策略，如：ModifyBandWidth。
3. 输入资源六段式，如：qcs::ame::uin/619****87:host/m**.**4.com，单击【添加声明】然后单击【下一步】。六段式编写可参考资源六段式说明。
4. 根据自身需求，可自定义修改【策略名称】及【描述】，然后单击【完成】，即可完成自定义策略新建。
5. 选择策略，单击【关联用户/组】，将策略关联到相关的子账户，单击【确定】后策略即可关联到子账户。



