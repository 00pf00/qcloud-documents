## 操作场景
设置工作流后，您上传到指定 Bucket 和目录下的视频将自动触发视频处理，输出文件将写入指定 Bucket 和路径。在工作流中可以设置转码任务、截图任务、转动图任务及添加水印。

## 创建工作流步骤
1. 登录 [云转码控制台]()，单击左侧导航栏的【工作流管理】，进入“工作流管理”界面。
2. 单击【创建工作流】，进入“创建工作流”页面。在创建工作流时，您需要设置工作流名称、触发 Bucket、触发目录、输出 Bucket、输出目录、事件通知及配置项。


- **工作流名称**
必填项，仅支持中文、英文、数字和下划线(\_)，长度不能超过128个字符，任务流名称不可重复。
- **触发 Bucket**
    - 必选项，您可在此 APPID 下创建的 Bucket 中选择一个作为触发 Bucket。
    - 工作流开启后，上传视频文件至此 Bucket 可以自动触发工作流的执行。
- **触发目录**
选填项，以斜杠（/）结尾，如果不填写，则对触发 Bucket 下所有路径生效。
- **输出 Bucket**
    - 必选项，默认与触发 Bucket 相同，您可在此 APPID 下，与触发 Bucket 相同地域的 Bucket 中选择一个作为输出 Bucket。
    - 工作流处理完成后新生成视频文件将存储在该 Bucket 中。
- **输出目录**
选填项，以斜杠（/）结尾，如果不填写，则输出目录与触发目录保持一致。
- **事件通知**
	- 开启事件通知后（事件通知默认关闭），用户可在消息队列 CMQ 模型中选择队列模型或主题模型，并填写所选模型的名称和地域，设置完成后，指定的 CMQ 将接收视频处理的事件通知。
	- CMQ 事件通知需在用户开通 CMQ 服务并创建队列模型或主题模型后才可使用，详细请参见 [消息队列 CMQ]()。
- **配置项**
在转码任务、截图任务和转动图任务中，至少选择一项进行配置。

#### 转码任务配置 
转码任务中可配置的模板为**转码模板**和**水印模板**，该任务支持使用预置模板或自定义模板。

- 转码模板：在已创建好的模板列表中进行选择，每个任务配置支持添加一到多个转码模板。如果已有模板不符合使用要求，则可以在 [模板设置 - 转码模板]() 中重新创建新的模板。
- 水印模板：每个转码模板最多可以支持添加四个水印。如果已有水印不符合使用要求，则可以在 [模板设置 - 水印模板]() 中重新创建新的模板。


#### 截图任务配置

截图任务可配置的模板为**截图模板**和**水印模板**，该任务支持使用预置模板或自定义模板。

- 截图模板：包含时间点截图、采样截图和雪碧图截图的截图方式，每种截图方式只能选择对应方式下已配置好的模板，时间点截图需要进行时间点的选取。如果已有模板不符合使用要求，则可以在 [模板设置 - 截图模板]() 中重新创建新的模板。
- 水印模板：每个转码模板最多可以支持添加四个水印。如果已有水印不符合使用要求，则可以在 [模板设置 - 水印模板]() 中重新创建新的模板。

#### 转动图任务配置 
转动图任务仅可配置转动图模板，该任务支持使用预置模板或自定义模板。

转动图模板：支持添加多个转动图模板及转动图时间段的再次配置。如果已有模板不符合使用要求，则可以在 [模板设置 - 转动图模板]() 中重新创建新的模板。

## 管理工作流步骤
1. 登录 [云转码控制台]()，单击左侧导航栏的【工作流管理】，进入“工作流管理”界面。
2. 工作流列表展示了工作流名称/ID、触发 Bucket、地域、目录、创建时间以及启用状态等信息。支持按照创建时间排序、任务流名称搜索以及对指定工作流进行查看详情、编辑和删除操作。


#### 启用工作流

- 工作流默认为未启用状态，点击该工作流对应的状态按钮后，可启用工作流。
- 只有当工作流启用后，在触发 Bucket 内上传的视频文件才会被自动执行。

#### 停用工作流
- 点击工作流对应的状态按钮，可停用工作流。
- 工作流停用后，上传视频文件到触发bucket将不再执行视频处理任务。

**编辑工作流**
- 点击工作流【操作】栏中的编辑按钮，可进入工作流编辑页面，对工作流名称、触发 Bucket、触发路径、输出 Bucket、输出路径、事件通知和配置项等进行修改。
- 工作流处于启用状态时，无法对其进行编辑和删除操作。

**删除工作流**
- 点击工作流【操作】栏中的删除按钮，可删除该工作流。
- 删除工作流后，上传视频文件到触发 Bucket 将不再执行视频处理任务。
- 工作流处于启用状态时，无法对其进行编辑和删除操作。

