## 现象描述

[](id:FaultPhenomenon1)
**现象**：Web超级播放器接入报错”Error Code：4”。如下图所示：
![](https://main.qcloudimg.com/raw/6d906e719c336646fd3105f96ad7b31e.png)

## 可能原因
- 获取不到视频资源
- 视频格式不支持
- 当前播放环境不支持
- Js顺序加载失败

## 解决思路
- xxxxx  待定如果您远程桌面连接 Windows 实例时，遇到 [现象1](#FaultPhenomenon1) 的情况，则需要将用户帐户添加至 Windows 实例设置的允许通过远程桌面服务登录的列表中。具体的操作请参见 [配置允许远程登录的权限](#ConfigurationToAllowAccess)。
- xxxxx  待定如果您远程桌面连接 Windows 实例时，遇到 [现象2](#FaultPhenomenon2) 的情况，则需要将用户帐户从 Windows 实例设置的不允许通过远程桌面服务登录的列表中删除。具体的操作请参见 [修改拒绝远程登录的权限](#ModifyLoginAuthority)。

## 处理步骤

### 获取不到视频资源
1. 首先，需检查确保对应视频资源未被删除，本地网络环境良好，可以对比使用其他播放器如ffplay、VLC等播放对应视频是否正常；
2. 超级播放器是根据页面代码中appid和fileid发送请求给点播后台，后台根据对应的appid和fileid返回对应的视频信息，播放器拿到视频信息再去请求视频，如果对应appid开通key防盗链等配置，则需要在播放过程中带入对应字段进行播放信息的获取。如下图 播放带psign示例：
![](https://main.qcloudimg.com/raw/d5676e899f8eb7e2d04acd914ea46bac.png)

### 视频格式不支持
播放器是依赖浏览器自身解码能力解析视频进行播放，如果上传的视频没有执行转码或本身视频文件的编码信息与当前播放环境不兼容，则会导致播放异常，我们可以通过将视频执行转码操作或对比Demo看是否可以正常播放，如果Demo是异常，那断定是该问题。
![](https://main.qcloudimg.com/raw/bf2d21653f802408098bc19b0fe8d17a.png)

### 当前播放环境不支持
可以模拟环境播放测试，由于PC端chrome浏览器播放m3u8视频是通过MSE转封装播放的，而IOS具有直接播放m3u8的能力，所以在PC模拟iOS的环境，播放器获取环境是iOS时，会直接播放m3u8，而不是像其他PC播放那样调用MSE来播放m3u8,但模拟环境并不是真实的iOS,并没有直接播放m3u8的能力，所以如果使用模拟ios环境来播放对应视频，这里有可能会导致报错。如下图chrome 模拟展示：
![](https://main.qcloudimg.com/raw/633f535d33e0ab172185c4147b71ebb0.png)

### Js 顺序加载失败
如果是这个场景，那需要保证 hls.js 在 tcplayer.js 前引入，tcplayer.js 加载并初始化播放器后，需要通过 hls.js 来播放hls视频，如果hls.js在tcplayer.js之后引入，播放器初始化成功并调用hls.js进行视频播放器的时候，hls.js可能并未加载成功，导致播放失败，原来用户播放失败是这里没有调整好。
错误示例：
![](https://main.qcloudimg.com/raw/3cd2af049ab6ae7bf46943e92f6a9ab3.png)
>?hls.js在tcplayer.js后

正确示例：
![](https://main.qcloudimg.com/raw/0fafc0e3e9b80273a2099d5d431fa8e4.png)
>?hls.js在tcplayer.js前

>!有些情况下，通过动态加载js，虽然hls.js在tcplayer.js前，但是动态加载并不能保证加载顺序按照对应的顺序加载，hls.js可能也会偶尔在tcplayer.js后加载，导致偶现报错code4。

如果您通过以上方法仍未解决超级播放器报错Error Code:4的问题，请可以提交工单反馈。
