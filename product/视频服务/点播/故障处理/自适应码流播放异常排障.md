## 现象描述[](id:FaultPhenomenon1)
**现象**：Web 超级播放器播放自适应码流不符合预期，比如播放了源文件、比如没有播放加密文件、比如播放报错Error Code:-14。

## 可能原因

- 转自适应码流模板被删除。
- 预置自适应码流模板和播放器签名不一致。
- 播放器配置和自定义码流模板不一致以及 psign 参数缺失。

## 处理步骤
### 转自适应码流模板被删除
1. 首先需要检查对应视频资源是否被删除，确认资源是否被删除可以通过调用云点播api（DescribeMediaInfos）看数据应答中是否包含adp.xxx.m3u8格式的数据
若是，将视频执行自适应转码操作。
若否，请执行 [步骤2](#step2)。
2. [](id:step2)对比 Demo 查看是否正常播放，请参见 [腾讯云视频点播示例](https://imgcache.qq.com/open/qcloud/video/tcplayer/examples/vod/tcplayer-vod-hls-decrypt-key-tool.html)。
![](https://main.qcloudimg.com/raw/46e4518d610883b3ab6441ac60ea37ce.png)

### 自适应码流模板和播放器签名不一致
此种情况常见于：转码了12模板的自适应码流，播放器签名代码中设置的 pcfg=default 导致此异常。（默认key防盗链已开启）

<dx-tabs>
::: 场景1
自适应码流模板若是预置的10模板，那么可以在播放器签名中设置pcfg=default，也可以不指定，是默认读取的配置。这里可以通过签名校验工具进行确认：
![](https://main.qcloudimg.com/raw/49e3d76fcbc2d0a205b5194cca93d6a9.png)
:::
::: 场景2
自适应码流模板若是预置的12模板，那么必须要在播放器签名中设置 pcfg=basicDrmPreset
>?签名时，pcfg 和 fileId 同层级。

<dx-codeblock>
:::  php
<?php
require 'vendor/autoload.php';
use \Firebase\JWT\JWT;
$appId = xxxxxx; // 用户 appid
$fileId = "xxxxxx"; // 目标 FileId
$currentTime = time();
$psignExpire = $currentTime + 3600; // 可任意设置过期时间，示例1h
$urlTimeExpire = dechex($psignExpire); // 可任意设置过期时间，16进制字符串形式
$key = "xxxxxxxx";
$payload = array(
  "appId" => $appId,
  "fileId" => $fileId,
  "currentTimeStamp" => $currentTime,
   pcfg=basicDrmPreset,
);
$jwt = JWT::encode($payload, $key, 'HS256');
print_r($jwt);
?>
:::
</dx-codeblock>
:::
</dx-tabs>

### 播放器配置名称和自定义码流模板不一致以及 psign 参数缺失
此种常见于自定义的自适应码流（默认key防盗链已开启）。
1. 此时必须要在播放器签名中设置pcfg=AdpatInstance（AdpatInstance即为自定义播放器的配置名称）
![](https://main.qcloudimg.com/raw/c761d0d2a66a5a20c7ea4521fb7321f7.png)
2. 且需要播放代码中设置psign参数（例如：
psign=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcHBJZCI6MTI1OTYzNDIzNSwiZmlsZUlkIjoiNTI4NTg5MDgxNTM2OTQ4ODUzMiIsInBjZmciOiJpdmhlYXJ0IiwiY3VycmVudFRpbWVTdGFtcCI6MTYxNTc4OTAxNiwiZXhwaXJlVGltZVN0YW1wIjoxNjE1ODAzNDE2LCJ1cmxBY2Nlc3NJbmZvIjp7InQiOiI2MDRmMzQxOCIsImV4cGVyIjoiMzEwIiwicmxpbWl0IjozLCJ1cyI6Iml2MTYxNTc4OTAxNiJ9fQ.OWJmRs4RVg5igMgRlvtuPIwSg5PbG687Y3y51bubvVs）
![](https://main.qcloudimg.com/raw/ded5224bcb651292435568b8d2c7ce78.png)
请参见 [psign 生成](https://vods.cloud.tencent.com/signature/super-player-sign.html)。
![](https://main.qcloudimg.com/raw/5c9684abd69151ff6ab06a7674667b75.png)