创建Logstash实例后，可以创建管道进行数据同步。

在本部分中，您将创建一个Logstash管道，该管道用于将一个Elasticsearch集群中的索引同步到另一个Elasticsearch集群中。

## 操作步骤

### 登录控制台

登录 [ES 控制台](https://console.cloud.tencent.com/es)，在左侧导航栏单击【Logstash实例】，进入Logstash实例列表页。

### 创建管道

- 单击实例列表中要操作的实例的ID，进入实例基本信息页。

- 单击【管道管理】切换到管道管理页。

- 单击【新建管道】按钮，出现如下界面：

  ![新建管道](https://main.qcloudimg.com/raw/a3ab4620184bc4c5beb0c1e468eb2ed9.png)

- 输入【Config配置】：

  举例如下：

  ```
  input {
      elasticsearch {
      hosts => ["http://x.x.x.x:9200"]
      user => "elastic"
      password => "password"
      index => "test1"
      docinfo => true
    }
  }

  output {
    elasticsearch {
      hosts => ["http://x.x.x.x:9200"]
      user => "elastic"
      password => "password"
      index => "%{[@metadata][_index]}"
      document_id => "%{[@metadata][_id]}"
    }
  
  }
  ```
参数说明：

	* hosts: elasticsearch集群地址列表，input中的hosts为源elasticsearch集群地址，output中的host为目标elasticsearch集群的地址
	* user: elasticsearch集群账号
	* password: elasticsearch集群密码
	* index: 索引名称
	* docinfo: 是否在event中填充索引名称，type以及id等文档元信息，默认为false
	* document\_type: 索引type，若目标elasticsearch集群为7.x及以上的版本，不必设置该字段
	* document_id: 文档ID


- 输入【参数配置】：

​		举例如下：
​		![参数配置](https://main.qcloudimg.com/raw/5e36d8101d0de1f1118934258537286d.png)



​		参数说明请参见[管道管理](https://xxx) <font color="red">（url需要更新）</font>

- 单击【保存】或者【保存并部署】
  - 单击【保存】：保存管道信息到Logstash并触发实例变更，配置不会生效。保存后返回【管道管理】页。可在【管道列表】中单击【操作】列的【部署】，触发实例重启生效。
  - 单击【保存并部署】：保存并且部署后，触发实例重启生效。

