
## 1. 接口描述
本接口用于对60秒之内的短音频文件进行快速识别。

- 支持本地语音文件上传和语音URL上传两种请求方式

## 2. 接口要求
使用一句话识别 SDK 时，需按照以下要求。

| 内容 | 说明 | 
| --- | --- |
| 请求地址|  https://asr.tencentcloudapi.com/?{请求参数} |
| 音频属性| 采样率16k或8k、位长16bits、单声道，如何查看自己的音频属性请参见[ 常见问题](https://cloud.tencent.com/document/product/1093/35804)  |
| 音频格式| wav、mp3 |
| 数据长度| 本地语音上传不超过600KB；URL方式上传不超过60s |
| 语言种类| 中文普通话、带有一定方言口音的普通话 |
| 免费额度 | 每月15000次 |
| 请求频率限制 | 25次/秒 |


## 3. 使用步骤
1. 首先获取您的AppID、SecretID 和 SecretKey。在使用该接口前，需要在[ 语音识别控制台 ](https://console.cloud.tencent.com/asr)开通服务，并进入 [API 密钥管理页面](https://console.cloud.tencent.com/cam/capi) 新建密钥，生成 AppID、SecretID 和 SecretKey ，用于 SDK 调用时生成签名，签名将用来进行接口鉴权。
2. 查看您的音频属性和格式，应满足接口支持的属性和格式，否则会请求失败。
3. 通过SDK提交一句话识别的请求。
4. 如果返回的code = 0，表示请求成功，同时一句话识别系统会将识别结果返回给客户端；如果返回的code不为0，请参见状态码查看错误详情。


### 3.1 一句话识别请求

#### 请求参数
请求参数主要由**请求 URL** 和**请求头部**组成。


**请求 URL 示例**

用户通过语音URL（https://test-wav-1259336130.cos.ap-shanghai.myqcloud.com/test_short/1510131497528.wav）的方式（SourceType为0）请求一句话识别服务，服务的引擎模型为：16k通用模型 （EngSerViceType = 16k\_0），一句话语音的采样率为16k，声道数为单声道。

```
https://asr.tencentcloudapi.com/?Action=SentenceRecognition&ProjectId=0&SubServiceType=2&EngSerViceType=16k_0&SourceType=0&Url=https://test-wav-1259336130.cos.ap-shanghai.myqcloud.com/test_short/1510131497528.wav&SecretId=111&Timestamp=111&VoiceFormat=wav&UsrAudioKey=www&DataLen=159768&<公共请求参数>
```

**请求 URL 参数说明**
以下请求参数列表仅列出了接口请求参数和部分公共参数，完整公共参数列表见 [ 公共请求参数](https://cloud.tencent.com/document/api/1093/35640)。

| 参数名称 | 必选 | 类型 | 描述 |  
| --- | --- | --- | --- |
| Action |  是 | String | 公共参数，本接口取值：SentenceRecognition。 |
| Version |  是 | String | 公共参数，本接口取值：2019-06-14。 |
| Region |  否 | String | 公共参数，本接口不需要传递此参数。 |
| ProjectId |  是 | Integer | 腾讯云项目ID，可填0，总长度不超过1024字节。 |
| SubServiceType | 是 | Integer | 子服务类型。2：一句话识别。|
| EngineServiceType | 是 | String | 引擎类型。8k\_0:8k 通用，16k\_0:16k 通用|
| SourceType | 是 | Integer | 语音数据来源。 0：语音URL；1：语音数据（post body）。|
| VoiceFormat | 是 | String | 识别音频的音频格式,wav或者mp3|
| Url | 否 | String | 语音 URL，公网可下载。当 SourceType 值为 0（语音 URL上传） 时须填写该字段，为 1 时不填；URL 的长度大于 0，小于 2048，需进行urlencode编码。音频时间长度要小于60s。|
| Data | 否 | String | 语音数据，当SourceType 值为1（本地语音数据上传）时必须填写，当SourceType 值为0（语音 URL上传）可不写。要使用base64编码(采用python语言时注意读取文件应该为string而不是byte，以byte格式读取后要decode()。编码后的数据不可带有回车换行符)。音频数据要小于600KB。|
| DataLen | 否 | Integer | 数据长度，单位为字节。当 SourceType 值为1（本地语音数据上传）时必须填写，当 SourceType 值为0（语音 URL上传）可不写（此数据长度为数据未进行base64编码时的数据长度）。|




### 3.2 一句话识别结果返回

**同步返回示例**

```
{  "Response": {    "Result": "还将带动多个规模万亿级别的新兴产业。",    "RequestId": "8984d9a9-343f-4c67-8fd9-5c79510a12da"  }}
```

**返回参数说明**

| 参数名称 | 类型 | 描述 |  
| --- | --- | --- | --- |
| Result | String | 识别结果。 |
| RequestId | String | 唯一请求ID，每次请求都会返回。定位问题时需要提供该次请求的RequestId。 |


## 4. 错误码
以下仅列出了接口业务逻辑相关的错误码，其他错误码详见 [公共错误码](https://cloud.tencent.com/document/api/1093/35643#.E5.85.AC.E5.85.B1.E9.94.99.E8.AF.AF.E7.A0.81)

| 错误码 |  说明 |  
| --- | --- |
| 100 | 获取语音分片信息失败 |
| 101 | 语音分片过大 |
| 102 | 参数不合法 |
| 103 | 访问数据库失败 |
| 104 | appid未注册 |
| 105 | 模板不存在 |
| 106 | 模板停用 |
| 107 | 鉴权失败 |
| 108 | 拼接签名串失败 |
| 109 | l5获取 IP、port 失败 |
| 110 | 后台识别服务器故障，请从 seq=0重传 |
| 111 | 后台识别模块回包格式错误|
| 112 | 语音分片为空 |
|AuthFailure.InvalidSecretId|	密钥非法（不是云 API 密钥类型）。||AuthFailure.MFAFailure	|MFA 错误。||AuthFailure.SecretIdNotFound	|密钥不存在。||AuthFailure.SignatureExpire	|签名过期。||AuthFailure.SignatureFailure	|签名错误。||AuthFailure.TokenFailure	|token 错误。||AuthFailure.UnauthorizedOperation	|请求未 CAM 授权。||DryRunOperation	DryRun |操作，代表请求将会是成功的，只是多传了 DryRun 参数。||FailedOperation	|操作失败。||InternalError	|内部错误。||InvalidAction	|接口不存在。||InvalidParameter	|参数错误。||InvalidParameterValue	|参数取值错误。||LimitExceeded	|超过配额限制。||MissingParameter	|缺少参数错误。||NoSuchVersion	|接口版本不存在。||RequestLimitExceeded	|请求的次数超过了频率限制。||ResourceInUse	|资源被占用。||ResourceInsufficient|	资源不足。||ResourceNotFound	|资源不存在。||ResourceUnavailable	|资源不可用。||UnauthorizedOperation	|未授权操作。||UnknownParameter	|未知参数错误。||UnsupportedOperation	|操作不支持。||UnsupportedProtocol	|http(s)请求协议错误，只支持 GET 和 POST 请求。||UnsupportedRegion	|接口不支持所传地域。|

<span id="PHP"></span>
